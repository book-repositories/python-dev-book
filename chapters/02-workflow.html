<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="keywords" content="python, development, best practices, testing, CI/CD, packaging">
<meta name="description" content="A comprehensive guide to Python development practices, tools, and workflows">

<title>4&nbsp; Part 2: Advancing Your Workflow – From Zero to Production: A Practical Python Development Pipeline</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/03-documentation.html" rel="next">
<link href="../chapters/01-foundation.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-db5b0bf65a30ebebd809f4ca6d02714e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/02-workflow.html">Part 2: Advancing Your Workflow</a></li><li class="breadcrumb-item"><a href="../chapters/02-workflow.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">From Zero to Production: A Practical Python Development Pipeline</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/yourusername/python-dev-book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../From-Zero-to-Production--A-Practical-Python-Development-Pipeline.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../From-Zero-to-Production--A-Practical-Python-Development-Pipeline.epub">
              <i class="bi bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 1: Setting the Foundation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/01-foundation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 2: Advancing Your Workflow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/02-workflow.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 3: Documentation and Deployment</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/03-documentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 4: Case Study</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/04-case-study.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/05-conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/a-checklist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/b-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/c-glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#robust-dependency-management-with-pip-tools-and-uv" id="toc-robust-dependency-management-with-pip-tools-and-uv" class="nav-link active" data-scroll-target="#robust-dependency-management-with-pip-tools-and-uv"><span class="header-section-number">4.1</span> Robust Dependency Management with pip-tools and uv</a>
  <ul class="collapse">
  <li><a href="#the-problem-with-pip-freeze" id="toc-the-problem-with-pip-freeze" class="nav-link" data-scroll-target="#the-problem-with-pip-freeze"><span class="header-section-number">4.1.1</span> The Problem with <code>pip freeze</code></a></li>
  <li><a href="#solution-1-pip-tools" id="toc-solution-1-pip-tools" class="nav-link" data-scroll-target="#solution-1-pip-tools"><span class="header-section-number">4.1.2</span> Solution 1: pip-tools</a></li>
  <li><a href="#solution-2-uv" id="toc-solution-2-uv" class="nav-link" data-scroll-target="#solution-2-uv"><span class="header-section-number">4.1.3</span> Solution 2: uv</a></li>
  <li><a href="#choosing-between-pip-tools-and-uv" id="toc-choosing-between-pip-tools-and-uv" class="nav-link" data-scroll-target="#choosing-between-pip-tools-and-uv"><span class="header-section-number">4.1.4</span> Choosing Between pip-tools and uv</a></li>
  <li><a href="#best-practices-for-either-approach" id="toc-best-practices-for-either-approach" class="nav-link" data-scroll-target="#best-practices-for-either-approach"><span class="header-section-number">4.1.5</span> Best Practices for Either Approach</a></li>
  </ul></li>
  <li><a href="#code-quality-tools-with-ruff" id="toc-code-quality-tools-with-ruff" class="nav-link" data-scroll-target="#code-quality-tools-with-ruff"><span class="header-section-number">4.2</span> Code Quality Tools with Ruff</a>
  <ul class="collapse">
  <li><a href="#the-evolution-of-python-code-quality-tools" id="toc-the-evolution-of-python-code-quality-tools" class="nav-link" data-scroll-target="#the-evolution-of-python-code-quality-tools"><span class="header-section-number">4.2.1</span> The Evolution of Python Code Quality Tools</a></li>
  <li><a href="#why-ruff" id="toc-why-ruff" class="nav-link" data-scroll-target="#why-ruff"><span class="header-section-number">4.2.2</span> Why Ruff?</a></li>
  <li><a href="#getting-started-with-ruff" id="toc-getting-started-with-ruff" class="nav-link" data-scroll-target="#getting-started-with-ruff"><span class="header-section-number">4.2.3</span> Getting Started with Ruff</a></li>
  <li><a href="#basic-configuration" id="toc-basic-configuration" class="nav-link" data-scroll-target="#basic-configuration"><span class="header-section-number">4.2.4</span> Basic Configuration</a></li>
  <li><a href="#using-ruff-in-your-workflow" id="toc-using-ruff-in-your-workflow" class="nav-link" data-scroll-target="#using-ruff-in-your-workflow"><span class="header-section-number">4.2.5</span> Using Ruff in Your Workflow</a></li>
  <li><a href="#real-world-configuration-example" id="toc-real-world-configuration-example" class="nav-link" data-scroll-target="#real-world-configuration-example"><span class="header-section-number">4.2.6</span> Real-world Configuration Example</a></li>
  <li><a href="#integrating-ruff-into-your-editor" id="toc-integrating-ruff-into-your-editor" class="nav-link" data-scroll-target="#integrating-ruff-into-your-editor"><span class="header-section-number">4.2.7</span> Integrating Ruff into Your Editor</a></li>
  <li><a href="#gradually-adopting-ruff" id="toc-gradually-adopting-ruff" class="nav-link" data-scroll-target="#gradually-adopting-ruff"><span class="header-section-number">4.2.8</span> Gradually Adopting Ruff</a></li>
  <li><a href="#enforcing-code-quality-in-ci" id="toc-enforcing-code-quality-in-ci" class="nav-link" data-scroll-target="#enforcing-code-quality-in-ci"><span class="header-section-number">4.2.9</span> Enforcing Code Quality in CI</a></li>
  <li><a href="#beyond-ruff-when-to-consider-other-tools" id="toc-beyond-ruff-when-to-consider-other-tools" class="nav-link" data-scroll-target="#beyond-ruff-when-to-consider-other-tools"><span class="header-section-number">4.2.10</span> Beyond Ruff: When to Consider Other Tools</a></li>
  </ul></li>
  <li><a href="#automated-testing-with-pytest" id="toc-automated-testing-with-pytest" class="nav-link" data-scroll-target="#automated-testing-with-pytest"><span class="header-section-number">4.3</span> Automated Testing with pytest</a>
  <ul class="collapse">
  <li><a href="#why-testing-matters" id="toc-why-testing-matters" class="nav-link" data-scroll-target="#why-testing-matters"><span class="header-section-number">4.3.1</span> Why Testing Matters</a></li>
  <li><a href="#getting-started-with-pytest" id="toc-getting-started-with-pytest" class="nav-link" data-scroll-target="#getting-started-with-pytest"><span class="header-section-number">4.3.2</span> Getting Started with pytest</a></li>
  <li><a href="#writing-your-first-test" id="toc-writing-your-first-test" class="nav-link" data-scroll-target="#writing-your-first-test"><span class="header-section-number">4.3.3</span> Writing Your First Test</a></li>
  <li><a href="#running-tests" id="toc-running-tests" class="nav-link" data-scroll-target="#running-tests"><span class="header-section-number">4.3.4</span> Running Tests</a></li>
  <li><a href="#pytest-features-that-make-testing-easier" id="toc-pytest-features-that-make-testing-easier" class="nav-link" data-scroll-target="#pytest-features-that-make-testing-easier"><span class="header-section-number">4.3.5</span> pytest Features That Make Testing Easier</a></li>
  <li><a href="#test-coverage" id="toc-test-coverage" class="nav-link" data-scroll-target="#test-coverage"><span class="header-section-number">4.3.6</span> Test Coverage</a></li>
  <li><a href="#testing-best-practices" id="toc-testing-best-practices" class="nav-link" data-scroll-target="#testing-best-practices"><span class="header-section-number">4.3.7</span> Testing Best Practices</a></li>
  <li><a href="#common-testing-patterns" id="toc-common-testing-patterns" class="nav-link" data-scroll-target="#common-testing-patterns"><span class="header-section-number">4.3.8</span> Common Testing Patterns</a></li>
  <li><a href="#testing-strategy" id="toc-testing-strategy" class="nav-link" data-scroll-target="#testing-strategy"><span class="header-section-number">4.3.9</span> Testing Strategy</a></li>
  <li><a href="#continuous-testing" id="toc-continuous-testing" class="nav-link" data-scroll-target="#continuous-testing"><span class="header-section-number">4.3.10</span> Continuous Testing</a></li>
  </ul></li>
  <li><a href="#type-checking-with-mypy" id="toc-type-checking-with-mypy" class="nav-link" data-scroll-target="#type-checking-with-mypy"><span class="header-section-number">4.4</span> Type Checking with mypy</a>
  <ul class="collapse">
  <li><a href="#understanding-type-hints" id="toc-understanding-type-hints" class="nav-link" data-scroll-target="#understanding-type-hints"><span class="header-section-number">4.4.1</span> Understanding Type Hints</a></li>
  <li><a href="#getting-started-with-mypy" id="toc-getting-started-with-mypy" class="nav-link" data-scroll-target="#getting-started-with-mypy"><span class="header-section-number">4.4.2</span> Getting Started with mypy</a></li>
  <li><a href="#configuring-mypy" id="toc-configuring-mypy" class="nav-link" data-scroll-target="#configuring-mypy"><span class="header-section-number">4.4.3</span> Configuring mypy</a></li>
  <li><a href="#gradual-typing" id="toc-gradual-typing" class="nav-link" data-scroll-target="#gradual-typing"><span class="header-section-number">4.4.4</span> Gradual Typing</a></li>
  <li><a href="#essential-type-annotations" id="toc-essential-type-annotations" class="nav-link" data-scroll-target="#essential-type-annotations"><span class="header-section-number">4.4.5</span> Essential Type Annotations</a></li>
  <li><a href="#advanced-type-hints" id="toc-advanced-type-hints" class="nav-link" data-scroll-target="#advanced-type-hints"><span class="header-section-number">4.4.6</span> Advanced Type Hints</a></li>
  <li><a href="#common-challenges-and-solutions" id="toc-common-challenges-and-solutions" class="nav-link" data-scroll-target="#common-challenges-and-solutions"><span class="header-section-number">4.4.7</span> Common Challenges and Solutions</a></li>
  <li><a href="#integration-with-your-workflow" id="toc-integration-with-your-workflow" class="nav-link" data-scroll-target="#integration-with-your-workflow"><span class="header-section-number">4.4.8</span> Integration with Your Workflow</a></li>
  <li><a href="#benefits-of-type-checking" id="toc-benefits-of-type-checking" class="nav-link" data-scroll-target="#benefits-of-type-checking"><span class="header-section-number">4.4.9</span> Benefits of Type Checking</a></li>
  <li><a href="#when-to-use-type-hints" id="toc-when-to-use-type-hints" class="nav-link" data-scroll-target="#when-to-use-type-hints"><span class="header-section-number">4.4.10</span> When to Use Type Hints</a></li>
  </ul></li>
  <li><a href="#security-analysis-with-bandit" id="toc-security-analysis-with-bandit" class="nav-link" data-scroll-target="#security-analysis-with-bandit"><span class="header-section-number">4.5</span> Security Analysis with Bandit</a>
  <ul class="collapse">
  <li><a href="#understanding-security-static-analysis" id="toc-understanding-security-static-analysis" class="nav-link" data-scroll-target="#understanding-security-static-analysis"><span class="header-section-number">4.5.1</span> Understanding Security Static Analysis</a></li>
  <li><a href="#getting-started-with-bandit" id="toc-getting-started-with-bandit" class="nav-link" data-scroll-target="#getting-started-with-bandit"><span class="header-section-number">4.5.2</span> Getting Started with Bandit</a></li>
  <li><a href="#security-issues-bandit-can-detect" id="toc-security-issues-bandit-can-detect" class="nav-link" data-scroll-target="#security-issues-bandit-can-detect"><span class="header-section-number">4.5.3</span> Security Issues Bandit Can Detect</a></li>
  <li><a href="#configuring-bandit" id="toc-configuring-bandit" class="nav-link" data-scroll-target="#configuring-bandit"><span class="header-section-number">4.5.4</span> Configuring Bandit</a></li>
  <li><a href="#integrating-bandit-in-your-workflow" id="toc-integrating-bandit-in-your-workflow" class="nav-link" data-scroll-target="#integrating-bandit-in-your-workflow"><span class="header-section-number">4.5.5</span> Integrating Bandit in Your Workflow</a></li>
  <li><a href="#responding-to-security-findings" id="toc-responding-to-security-findings" class="nav-link" data-scroll-target="#responding-to-security-findings"><span class="header-section-number">4.5.6</span> Responding to Security Findings</a></li>
  <li><a href="#false-positives" id="toc-false-positives" class="nav-link" data-scroll-target="#false-positives"><span class="header-section-number">4.5.7</span> False Positives</a></li>
  </ul></li>
  <li><a href="#finding-dead-code-with-vulture" id="toc-finding-dead-code-with-vulture" class="nav-link" data-scroll-target="#finding-dead-code-with-vulture"><span class="header-section-number">4.6</span> Finding Dead Code with Vulture</a>
  <ul class="collapse">
  <li><a href="#the-problem-of-dead-code" id="toc-the-problem-of-dead-code" class="nav-link" data-scroll-target="#the-problem-of-dead-code"><span class="header-section-number">4.6.1</span> The Problem of Dead Code</a></li>
  <li><a href="#getting-started-with-vulture" id="toc-getting-started-with-vulture" class="nav-link" data-scroll-target="#getting-started-with-vulture"><span class="header-section-number">4.6.2</span> Getting Started with Vulture</a></li>
  <li><a href="#what-vulture-detects" id="toc-what-vulture-detects" class="nav-link" data-scroll-target="#what-vulture-detects"><span class="header-section-number">4.6.3</span> What Vulture Detects</a></li>
  <li><a href="#handling-false-positives" id="toc-handling-false-positives" class="nav-link" data-scroll-target="#handling-false-positives"><span class="header-section-number">4.6.4</span> Handling False Positives</a></li>
  <li><a href="#configuration-and-integration" id="toc-configuration-and-integration" class="nav-link" data-scroll-target="#configuration-and-integration"><span class="header-section-number">4.6.5</span> Configuration and Integration</a></li>
  <li><a href="#best-practices-for-dead-code-removal" id="toc-best-practices-for-dead-code-removal" class="nav-link" data-scroll-target="#best-practices-for-dead-code-removal"><span class="header-section-number">4.6.6</span> Best Practices for Dead Code Removal</a></li>
  <li><a href="#when-to-run-vulture" id="toc-when-to-run-vulture" class="nav-link" data-scroll-target="#when-to-run-vulture"><span class="header-section-number">4.6.7</span> When to Run Vulture</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/yourusername/python-dev-book/edit/main/chapters/02-workflow.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/yourusername/python-dev-book/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/02-workflow.html">Part 2: Advancing Your Workflow</a></li><li class="breadcrumb-item"><a href="../chapters/02-workflow.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Part 2: Advancing Your Workflow</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>python, development, best practices, testing, CI/CD, packaging</p>
  </div>
</div>

</header>


<section id="robust-dependency-management-with-pip-tools-and-uv" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="robust-dependency-management-with-pip-tools-and-uv"><span class="header-section-number">4.1</span> Robust Dependency Management with pip-tools and uv</h2>
<p>As your projects grow in complexity or involve more developers, the basic <code>pip freeze &gt; requirements.txt</code> approach starts to show limitations. You need a dependency management system that gives you more control and ensures truly reproducible environments.</p>
<section id="the-problem-with-pip-freeze" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="the-problem-with-pip-freeze"><span class="header-section-number">4.1.1</span> The Problem with <code>pip freeze</code></h3>
<p>While <code>pip freeze</code> is convenient, it has several drawbacks:</p>
<ol type="1">
<li><p><strong>No distinction between direct and indirect dependencies</strong>: You can’t easily tell which packages you explicitly need versus those that were installed as dependencies of other packages.</p></li>
<li><p><strong>Maintenance challenges</strong>: When you want to update a package, you may need to regenerate the entire requirements file, potentially changing packages you didn’t intend to update.</p></li>
<li><p><strong>No environment synchronization</strong>: Installing from a requirements.txt file adds packages but doesn’t remove packages that are no longer needed.</p></li>
<li><p><strong>No explicit dependency specification</strong>: You can’t easily specify version ranges (e.g., “I need any Django 4.x version”) or extras.</p></li>
</ol>
<p>Let’s explore two powerful solutions: <code>pip-tools</code> and <code>uv</code>.</p>
</section>
<section id="solution-1-pip-tools" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="solution-1-pip-tools"><span class="header-section-number">4.1.2</span> Solution 1: pip-tools</h3>
<p>pip-tools introduces a two-file approach to dependency management:</p>
<ol type="1">
<li><code>requirements.in</code>: A manually maintained list of your direct dependencies, potentially with version constraints.</li>
<li><code>requirements.txt</code>: A generated lock file containing exact versions of all dependencies (direct and indirect).</li>
</ol>
<section id="getting-started-with-pip-tools" class="level4" data-number="4.1.2.1">
<h4 data-number="4.1.2.1" class="anchored" data-anchor-id="getting-started-with-pip-tools"><span class="header-section-number">4.1.2.1</span> Getting Started with pip-tools</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install pip-tools in your virtual environment</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pip-tools</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a requirements.in file with your direct dependencies</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">requests&gt;=2.25.0  # Use any version 2.25.0 or newer</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">flask==2.0.1      # Use exactly this version</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="st">pandas            # Use any version</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile the lock file</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> requirements.in</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the exact dependencies</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The generated <code>requirements.txt</code> will contain exact versions of your specified packages plus all their dependencies, including hashes for security.</p>
</section>
<section id="managing-development-dependencies" class="level4" data-number="4.1.2.2">
<h4 data-number="4.1.2.2" class="anchored" data-anchor-id="managing-development-dependencies"><span class="header-section-number">4.1.2.2</span> Managing Development Dependencies</h4>
<p>For a cleaner setup, you can separate production and development dependencies:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create requirements-dev.in</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements-dev.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="st">-c requirements.txt  # Constraint: use same versions as in requirements.txt</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="st">pytest&gt;=7.0.0</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="st">pytest-cov</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="st">ruff</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="st">mypy</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile development dependencies</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> requirements-dev.in <span class="at">-o</span> requirements-dev.txt</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all dependencies (both prod and dev)</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt requirements-dev.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="updating-dependencies" class="level4" data-number="4.1.2.3">
<h4 data-number="4.1.2.3" class="anchored" data-anchor-id="updating-dependencies"><span class="header-section-number">4.1.2.3</span> Updating Dependencies</h4>
<p>When you need to update packages:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update all packages to their latest allowed versions</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--upgrade</span> requirements.in</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Update a specific package</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--upgrade-package</span> requests requirements.in</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># After updating, sync your environment</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="solution-2-uv" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="solution-2-uv"><span class="header-section-number">4.1.3</span> Solution 2: uv</h3>
<p><code>uv</code> is a newer, Rust-based tool that provides significant speed improvements while maintaining compatibility with existing Python packaging standards. It combines environment management, package installation, and dependency resolution in one tool.</p>
<section id="getting-started-with-uv" class="level4" data-number="4.1.3.1">
<h4 data-number="4.1.3.1" class="anchored" data-anchor-id="getting-started-with-uv"><span class="header-section-number">4.1.3.1</span> Getting Started with uv</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install uv (globally with pipx or in your current environment)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> install uv</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Or: pip install uv</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a virtual environment (if needed)</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> venv</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Activate the environment as usual</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> .venv/bin/activate  <span class="co"># On Windows: .venv\Scripts\activate</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the same requirements.in file as above</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="st">requests&gt;=2.25.0</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="st">flask==2.0.1</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="st">pandas</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile the lock file</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile requirements.in <span class="at">-o</span> requirements.txt</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip sync requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="key-advantages-of-uv" class="level4" data-number="4.1.3.2">
<h4 data-number="4.1.3.2" class="anchored" data-anchor-id="key-advantages-of-uv"><span class="header-section-number">4.1.3.2</span> Key Advantages of uv</h4>
<ol type="1">
<li><p><strong>Speed</strong>: uv is significantly faster than standard pip and pip-tools, especially for large dependency trees.</p></li>
<li><p><strong>Global caching</strong>: uv implements efficient caching, reducing redundant downloads across projects.</p></li>
<li><p><strong>Consolidated tooling</strong>: Acts as a replacement for multiple tools (pip, pip-tools, virtualenv) with a consistent interface.</p></li>
<li><p><strong>Enhanced dependency resolution</strong>: Often provides clearer error messages for dependency conflicts.</p></li>
</ol>
</section>
<section id="managing-dependencies-with-uv" class="level4" data-number="4.1.3.3">
<h4 data-number="4.1.3.3" class="anchored" data-anchor-id="managing-dependencies-with-uv"><span class="header-section-number">4.1.3.3</span> Managing Dependencies with uv</h4>
<p>uv supports the same workflow as pip-tools but with different commands:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For development dependencies</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements-dev.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">-c requirements.txt</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">pytest&gt;=7.0.0</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">pytest-cov</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">ruff</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">mypy</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile dev dependencies</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile requirements-dev.in <span class="at">-o</span> requirements-dev.txt</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all dependencies</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip sync requirements.txt requirements-dev.txt</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Update a specific package</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile <span class="at">--upgrade-package</span> requests requirements.in</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="choosing-between-pip-tools-and-uv" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="choosing-between-pip-tools-and-uv"><span class="header-section-number">4.1.4</span> Choosing Between pip-tools and uv</h3>
<p>Both tools solve the core problem of creating reproducible environments, but with different tradeoffs:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 36%">
<col style="width: 50%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th>Factor</th>
<th>pip-tools</th>
<th>uv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Speed</td>
<td>Good</td>
<td>Excellent (often 10x+ faster)</td>
</tr>
<tr class="even">
<td>Installation</td>
<td>Simple Python package</td>
<td>External tool (but simple to install)</td>
</tr>
<tr class="odd">
<td>Maturity</td>
<td>Well-established</td>
<td>Newer but rapidly maturing</td>
</tr>
<tr class="even">
<td>Functionality</td>
<td>Focused on dependency locking</td>
<td>Broader tool combining multiple functions</td>
</tr>
<tr class="odd">
<td>Learning curve</td>
<td>Minimal</td>
<td>Minimal (designed for compatibility)</td>
</tr>
</tbody>
</table>
<p>For beginners or smaller projects, pip-tools offers a gentle introduction to proper dependency management with minimal new concepts. For larger projects or when speed becomes important, uv provides significant benefits with a similar workflow.</p>
</section>
<section id="best-practices-for-either-approach" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="best-practices-for-either-approach"><span class="header-section-number">4.1.5</span> Best Practices for Either Approach</h3>
<p>Regardless of which tool you choose:</p>
<ol type="1">
<li><p><strong>Commit both <code>.in</code> and <code>.txt</code> files</strong> to version control. The <code>.in</code> files represent your intent, while the <code>.txt</code> files ensure reproducibility.</p></li>
<li><p><strong>Use constraints carefully</strong>. Start with loose constraints (just package names) and add version constraints only when needed.</p></li>
<li><p><strong>Regularly update dependencies</strong> to get security fixes, using <code>--upgrade</code> or <code>--upgrade-package</code>.</p></li>
<li><p><strong>Always use <code>pip-sync</code> or <code>uv pip sync</code></strong> instead of <code>pip install -r requirements.txt</code> to ensure your environment exactly matches the lock file.</p></li>
</ol>
<p>In the next section, we’ll explore how to maintain code quality through automated formatting and linting with Ruff, taking your workflow to the next professional level.</p>
</section>
</section>
<section id="code-quality-tools-with-ruff" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="code-quality-tools-with-ruff"><span class="header-section-number">4.2</span> Code Quality Tools with Ruff</h2>
<p>Writing code that works is only part of the development process. Code should also be readable, maintainable, and free from common errors. This is where code quality tools come in, helping you enforce consistent style and catch potential issues early.</p>
<section id="the-evolution-of-python-code-quality-tools" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="the-evolution-of-python-code-quality-tools"><span class="header-section-number">4.2.1</span> The Evolution of Python Code Quality Tools</h3>
<p>Traditionally, Python developers used multiple specialized tools:</p>
<ul>
<li><strong>Black</strong> for code formatting</li>
<li><strong>isort</strong> for import sorting</li>
<li><strong>Flake8</strong> for linting (style checks)</li>
<li><strong>Pylint</strong> for deeper static analysis</li>
</ul>
<p>While effective, maintaining configuration for all these tools was cumbersome. Enter Ruff – a modern, Rust-based tool that combines formatting and linting in one incredibly fast package.</p>
</section>
<section id="why-ruff" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="why-ruff"><span class="header-section-number">4.2.2</span> Why Ruff?</h3>
<p>Ruff offers several compelling advantages:</p>
<ol type="1">
<li><strong>Speed</strong>: Often 10-100x faster than traditional Python linters</li>
<li><strong>Consolidation</strong>: Replaces multiple tools with one consistent interface</li>
<li><strong>Compatibility</strong>: Implements rules from established tools (Flake8, Black, isort, etc.)</li>
<li><strong>Configuration</strong>: Single configuration in your pyproject.toml file</li>
<li><strong>Automatic fixing</strong>: Can automatically fix many issues it identifies</li>
</ol>
</section>
<section id="getting-started-with-ruff" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="getting-started-with-ruff"><span class="header-section-number">4.2.3</span> Getting Started with Ruff</h3>
<p>First, install Ruff in your virtual environment:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If using pip</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install ruff</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># If using uv</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip install ruff</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="basic-configuration" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="basic-configuration"><span class="header-section-number">4.2.4</span> Basic Configuration</h3>
<p>Configure Ruff in your <code>pyproject.toml</code> file:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff]</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable pycodestyle, Pyflakes, isort, and more</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="dt">select</span> <span class="op">=</span> <span class="op">[</span><span class="st">"E"</span><span class="op">,</span> <span class="st">"F"</span><span class="op">,</span> <span class="st">"I"</span><span class="op">]</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="dt">ignore</span> <span class="op">=</span> <span class="op">[]</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow lines to be as long as 100 characters</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="dt">line-length</span> <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume Python 3.10</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="dt">target-version</span> <span class="op">=</span> <span class="st">"py310"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff.format]</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Formats code similar to Black (this is the default)</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="dt">quote-style</span> <span class="op">=</span> <span class="st">"double"</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="dt">indent-style</span> <span class="op">=</span> <span class="st">"space"</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="dt">line-ending</span> <span class="op">=</span> <span class="st">"auto"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This configuration enables: - <code>E</code> rules from pycodestyle (PEP 8 style guide) - <code>F</code> rules from Pyflakes (logical and syntax error detection) - <code>I</code> rules for import sorting (like isort)</p>
</section>
<section id="using-ruff-in-your-workflow" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="using-ruff-in-your-workflow"><span class="header-section-number">4.2.5</span> Using Ruff in Your Workflow</h3>
<p>Ruff provides two main commands:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check code for issues without changing it</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check .</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Format code (similar to Black)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> format .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To automatically fix issues that Ruff can solve:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix all auto-fixable issues</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check <span class="at">--fix</span> .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="real-world-configuration-example" class="level3" data-number="4.2.6">
<h3 data-number="4.2.6" class="anchored" data-anchor-id="real-world-configuration-example"><span class="header-section-number">4.2.6</span> Real-world Configuration Example</h3>
<p>Here’s a more comprehensive configuration that balances strictness with practicality:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Target Python version</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="dt">target-version</span> <span class="op">=</span> <span class="st">"py39"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Line length</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="dt">line-length</span> <span class="op">=</span> <span class="dv">88</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable a comprehensive set of rules</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="dt">select</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E"</span><span class="op">,</span>   <span class="co"># pycodestyle errors</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"F"</span><span class="op">,</span>   <span class="co"># pyflakes</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I"</span><span class="op">,</span>   <span class="co"># isort</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"W"</span><span class="op">,</span>   <span class="co"># pycodestyle warnings</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"C90"</span><span class="op">,</span> <span class="co"># mccabe complexity</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"N"</span><span class="op">,</span>   <span class="co"># pep8-naming</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B"</span><span class="op">,</span>   <span class="co"># flake8-bugbear</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UP"</span><span class="op">,</span>  <span class="co"># pyupgrade</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D"</span><span class="op">,</span>   <span class="co"># pydocstyle</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Ignore specific rules</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="dt">ignore</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E203"</span><span class="op">,</span>  <span class="co"># Whitespace before ':' (handled by formatter)</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D100"</span><span class="op">,</span>  <span class="co"># Missing docstring in public module</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D104"</span><span class="op">,</span>  <span class="co"># Missing docstring in public package</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude certain files/directories from checking</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="dt">exclude</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">".git"</span><span class="op">,</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">".venv"</span><span class="op">,</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"__pycache__"</span><span class="op">,</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"build"</span><span class="op">,</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dist"</span><span class="op">,</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff.pydocstyle]</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Google-style docstrings</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="dt">convention</span> <span class="op">=</span> <span class="st">"google"</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff.mccabe]</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Maximum McCabe complexity allowed</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="dt">max-complexity</span> <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff.format]</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting options (black-compatible by default)</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="dt">quote-style</span> <span class="op">=</span> <span class="st">"double"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="integrating-ruff-into-your-editor" class="level3" data-number="4.2.7">
<h3 data-number="4.2.7" class="anchored" data-anchor-id="integrating-ruff-into-your-editor"><span class="header-section-number">4.2.7</span> Integrating Ruff into Your Editor</h3>
<p>Ruff provides editor integrations for:</p>
<ul>
<li>VS Code (via the Ruff extension)</li>
<li>PyCharm (via third-party plugin)</li>
<li>Vim/Neovim</li>
<li>Emacs</li>
</ul>
<p>For example, in VS Code, install the Ruff extension and add to your settings.json:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.formatOnSave"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.codeActionsOnSave"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"source.fixAll.ruff"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"source.organizeImports.ruff"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This configuration automatically formats code and fixes issues whenever you save a file.</p>
</section>
<section id="gradually-adopting-ruff" class="level3" data-number="4.2.8">
<h3 data-number="4.2.8" class="anchored" data-anchor-id="gradually-adopting-ruff"><span class="header-section-number">4.2.8</span> Gradually Adopting Ruff</h3>
<p>If you’re working with an existing codebase, you can adopt Ruff gradually:</p>
<ol type="1">
<li><strong>Start with formatting only</strong>: Begin with <code>ruff format</code> to establish consistent formatting</li>
<li><strong>Add basic linting</strong>: Enable a few rule sets like <code>E</code>, <code>F</code>, and <code>I</code></li>
<li><strong>Gradually increase strictness</strong>: Add more rule sets as your team adjusts</li>
<li><strong>Use per-file ignores</strong>: For specific issues in specific files</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.ruff.per-file-ignores]</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">"tests/*"</span> <span class="op">=</span> <span class="op">[</span><span class="st">"D103"</span><span class="op">]</span>  <span class="co"># Ignore missing docstrings in tests</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="dt">"__init__.py"</span> <span class="op">=</span> <span class="op">[</span><span class="st">"F401"</span><span class="op">]</span>  <span class="co"># Ignore unused imports in __init__.py</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="enforcing-code-quality-in-ci" class="level3" data-number="4.2.9">
<h3 data-number="4.2.9" class="anchored" data-anchor-id="enforcing-code-quality-in-ci"><span class="header-section-number">4.2.9</span> Enforcing Code Quality in CI</h3>
<p>Add Ruff to your CI pipeline to ensure code quality standards are maintained:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In your GitHub Actions workflow (.github/workflows/ci.yml)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check formatting with Ruff</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> ruff format --check .</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Lint with Ruff</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> ruff check .</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>--check</code> flag on <code>ruff format</code> makes it exit with an error if files would be reformatted, instead of actually changing them.</p>
</section>
<section id="beyond-ruff-when-to-consider-other-tools" class="level3" data-number="4.2.10">
<h3 data-number="4.2.10" class="anchored" data-anchor-id="beyond-ruff-when-to-consider-other-tools"><span class="header-section-number">4.2.10</span> Beyond Ruff: When to Consider Other Tools</h3>
<p>While Ruff covers a wide range of code quality checks, some specific needs might require additional tools:</p>
<ul>
<li><strong>mypy</strong> for static type checking (covered in a later section)</li>
<li><strong>bandit</strong> for security-focused checks</li>
<li><strong>vulture</strong> for finding dead code</li>
</ul>
<p>However, Ruff’s rule set continues to expand, potentially reducing the need for these additional tools over time.</p>
<p>By incorporating Ruff into your workflow, you’ll catch many common errors before they reach production and maintain a consistent, readable codebase. In the next section, we’ll explore how to ensure your code works as expected through automated testing with pytest.</p>
</section>
</section>
<section id="automated-testing-with-pytest" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="automated-testing-with-pytest"><span class="header-section-number">4.3</span> Automated Testing with pytest</h2>
<p>Testing is a crucial aspect of software development that ensures your code works as intended and continues to work as you make changes. Python’s testing ecosystem offers numerous frameworks, but pytest has emerged as the most popular and powerful choice for most projects.</p>
<section id="why-testing-matters" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="why-testing-matters"><span class="header-section-number">4.3.1</span> Why Testing Matters</h3>
<p>Automated tests provide several key benefits:</p>
<ol type="1">
<li><strong>Verification</strong>: Confirm that your code works as expected</li>
<li><strong>Regression prevention</strong>: Catch when changes break existing functionality</li>
<li><strong>Documentation</strong>: Tests demonstrate how code is meant to be used</li>
<li><strong>Refactoring confidence</strong>: Change code structure while ensuring behavior remains correct</li>
<li><strong>Design feedback</strong>: Difficult-to-test code often indicates design problems</li>
</ol>
</section>
<section id="getting-started-with-pytest" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="getting-started-with-pytest"><span class="header-section-number">4.3.2</span> Getting Started with pytest</h3>
<p>First, install pytest in your virtual environment:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard installation</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pytest</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># With coverage reporting</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pytest pytest-cov</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="writing-your-first-test" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="writing-your-first-test"><span class="header-section-number">4.3.3</span> Writing Your First Test</h3>
<p>Let’s assume you have a simple function in <code>src/my_package/calculations.py</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Add two numbers and return the result."""</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Create a test file in <code>tests/test_calculations.py</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.calculations <span class="im">import</span> add</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_add():</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test basic addition</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="dv">1</span>, <span class="dv">2</span>) <span class="op">==</span> <span class="dv">3</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test with negative numbers</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>) <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>) <span class="op">==</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test with floating point</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="fl">1.5</span>, <span class="fl">2.5</span>) <span class="op">==</span> <span class="fl">4.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="running-tests" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="running-tests"><span class="header-section-number">4.3.4</span> Running Tests</h3>
<p>Run all tests from your project root:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run all tests</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with more detail</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">-v</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a specific test file</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> tests/test_calculations.py</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a specific test function</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> tests/test_calculations.py::test_add</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pytest-features-that-make-testing-easier" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="pytest-features-that-make-testing-easier"><span class="header-section-number">4.3.5</span> pytest Features That Make Testing Easier</h3>
<p>pytest has several features that make it superior to Python’s built-in unittest framework:</p>
<section id="simple-assertions" class="level4" data-number="4.3.5.1">
<h4 data-number="4.3.5.1" class="anchored" data-anchor-id="simple-assertions"><span class="header-section-number">4.3.5.1</span> 1. Simple Assertions</h4>
<p>Instead of methods like <code>assertEqual</code> or <code>assertTrue</code>, pytest lets you use Python’s built-in <code>assert</code> statement, making tests more readable.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With pytest</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> result <span class="op">==</span> expected</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Instead of unittest's</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="va">self</span>.assertEqual(result, expected)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="fixtures" class="level4" data-number="4.3.5.2">
<h4 data-number="4.3.5.2" class="anchored" data-anchor-id="fixtures"><span class="header-section-number">4.3.5.2</span> 2. Fixtures</h4>
<p>Fixtures are a powerful way to set up preconditions for your tests:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.database <span class="im">import</span> Database</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.fixture</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> db():</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Provide a clean database instance for tests."""</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    db <span class="op">=</span> Database(<span class="st">":memory:"</span>)  <span class="co"># Use in-memory SQLite</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    db.create_tables()</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> db</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    db.close()  <span class="co"># Cleanup happens after the test</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_save_record(db):</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The db fixture is automatically provided</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    record <span class="op">=</span> {<span class="st">"id"</span>: <span class="dv">1</span>, <span class="st">"name"</span>: <span class="st">"Test"</span>}</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    db.save(record)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> db.get(<span class="dv">1</span>) <span class="op">==</span> record</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="parameterized-tests" class="level4" data-number="4.3.5.3">
<h4 data-number="4.3.5.3" class="anchored" data-anchor-id="parameterized-tests"><span class="header-section-number">4.3.5.3</span> 3. Parameterized Tests</h4>
<p>Test multiple inputs without repetitive code:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.calculations <span class="im">import</span> add</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.parametrize</span>(<span class="st">"a, b, expected"</span>, [</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    (<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">4.0</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_add_parametrized(a, b, expected):</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(a, b) <span class="op">==</span> expected</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="marks-for-test-organization" class="level4" data-number="4.3.5.4">
<h4 data-number="4.3.5.4" class="anchored" data-anchor-id="marks-for-test-organization"><span class="header-section-number">4.3.5.4</span> 4. Marks for Test Organization</h4>
<p>Organize tests with marks:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.slow</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_complex_calculation():</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This test takes a long time</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Run only tests marked as 'slow'</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># pytest -m slow</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.skip</span>(reason<span class="op">=</span><span class="st">"Feature not implemented yet"</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_future_feature():</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.xfail</span>(reason<span class="op">=</span><span class="st">"Known bug #123"</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_buggy_function():</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="test-coverage" class="level3" data-number="4.3.6">
<h3 data-number="4.3.6" class="anchored" data-anchor-id="test-coverage"><span class="header-section-number">4.3.6</span> Test Coverage</h3>
<p>Track which parts of your code are tested using pytest-cov:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run tests with coverage report</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">--cov</span><span class="op">=</span>src/my_package</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate HTML report for detailed analysis</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">--cov</span><span class="op">=</span>src/my_package <span class="at">--cov-report</span><span class="op">=</span>html</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then open htmlcov/index.html in your browser</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A coverage report helps identify untested code:</p>
<pre><code>----------- coverage: platform linux, python 3.9.5-final-0 -----------
Name                             Stmts   Miss  Cover
----------------------------------------------------
src/my_package/__init__.py           1      0   100%
src/my_package/calculations.py      10      2    80%
src/my_package/models.py            45     15    67%
----------------------------------------------------
TOTAL                               56     17    70%</code></pre>
</section>
<section id="testing-best-practices" class="level3" data-number="4.3.7">
<h3 data-number="4.3.7" class="anchored" data-anchor-id="testing-best-practices"><span class="header-section-number">4.3.7</span> Testing Best Practices</h3>
<ol type="1">
<li><strong>Write tests as you develop</strong>: Don’t wait until the end</li>
<li><strong>Name tests clearly</strong>: Include the function name and scenario being tested</li>
<li><strong>One assertion per test</strong>: Focus each test on a single behavior</li>
<li><strong>Test edge cases</strong>: Empty input, boundary values, error conditions</li>
<li><strong>Avoid test interdependence</strong>: Tests should work independently</li>
<li><strong>Mock external dependencies</strong>: APIs, databases, file systems</li>
<li><strong>Keep tests fast</strong>: Slow tests get run less often</li>
</ol>
</section>
<section id="common-testing-patterns" class="level3" data-number="4.3.8">
<h3 data-number="4.3.8" class="anchored" data-anchor-id="common-testing-patterns"><span class="header-section-number">4.3.8</span> Common Testing Patterns</h3>
<section id="testing-exceptions" class="level4" data-number="4.3.8.1">
<h4 data-number="4.3.8.1" class="anchored" data-anchor-id="testing-exceptions"><span class="header-section-number">4.3.8.1</span> Testing Exceptions</h4>
<p>Verify that your code raises the right exceptions:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.validate <span class="im">import</span> validate_username</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_validate_username_too_short():</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pytest.raises(<span class="pp">ValueError</span>) <span class="im">as</span> excinfo:</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        validate_username(<span class="st">"ab"</span>)  <span class="co"># Too short</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="st">"Username must be at least 3 characters"</span> <span class="kw">in</span> <span class="bu">str</span>(excinfo.value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="testing-with-temporary-files" class="level4" data-number="4.3.8.2">
<h4 data-number="4.3.8.2" class="anchored" data-anchor-id="testing-with-temporary-files"><span class="header-section-number">4.3.8.2</span> Testing with Temporary Files</h4>
<p>Test file operations safely:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_save_to_file(tmp_path):</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tmp_path is a built-in pytest fixture</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    file_path <span class="op">=</span> tmp_path <span class="op">/</span> <span class="st">"test.txt"</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test file writing</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    save_to_file(file_path, <span class="st">"test content"</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verify content</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> file_path.read_text() <span class="op">==</span> <span class="st">"test content"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mocking" class="level4" data-number="4.3.8.3">
<h4 data-number="4.3.8.3" class="anchored" data-anchor-id="mocking"><span class="header-section-number">4.3.8.3</span> Mocking</h4>
<p>Isolate your code from external dependencies using the pytest-mock plugin:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fetch_user_data(mocker):</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mock the API call</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    mock_response <span class="op">=</span> mocker.patch(<span class="st">'requests.get'</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    mock_response.return_value.json.return_value <span class="op">=</span> {<span class="st">"id"</span>: <span class="dv">1</span>, <span class="st">"name"</span>: <span class="st">"Test User"</span>}</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test our function</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> my_package.api <span class="im">import</span> get_user</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    user <span class="op">=</span> get_user(<span class="dv">1</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verify results</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> user[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"Test User"</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    mock_response.assert_called_once_with(<span class="st">'https://api.example.com/users/1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="testing-strategy" class="level3" data-number="4.3.9">
<h3 data-number="4.3.9" class="anchored" data-anchor-id="testing-strategy"><span class="header-section-number">4.3.9</span> Testing Strategy</h3>
<p>As your project grows, organize tests into different categories:</p>
<ol type="1">
<li><strong>Unit tests</strong>: Test individual functions/classes in isolation</li>
<li><strong>Integration tests</strong>: Test interactions between components</li>
<li><strong>Functional tests</strong>: Test entire features from a user perspective</li>
</ol>
<p>Most projects should have a pyramid shape: many unit tests, fewer integration tests, and even fewer functional tests.</p>
</section>
<section id="continuous-testing" class="level3" data-number="4.3.10">
<h3 data-number="4.3.10" class="anchored" data-anchor-id="continuous-testing"><span class="header-section-number">4.3.10</span> Continuous Testing</h3>
<p>Make testing a habitual part of your workflow:</p>
<ol type="1">
<li><strong>Run relevant tests as you code</strong>: Many editors integrate with pytest</li>
<li><strong>Run full test suite before committing</strong>: Use pre-commit hooks</li>
<li><strong>Run tests in CI</strong>: Catch issues that might only appear in different environments</li>
</ol>
<p>By incorporating comprehensive testing into your development process, you’ll catch bugs earlier, ship with more confidence, and build a more maintainable codebase.</p>
<p>In the next section, we’ll explore static type checking with mypy, which can help catch a whole new category of errors before your code even runs.</p>
</section>
</section>
<section id="type-checking-with-mypy" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="type-checking-with-mypy"><span class="header-section-number">4.4</span> Type Checking with mypy</h2>
<p>Python is dynamically typed, which provides flexibility but can also lead to type-related errors that only appear at runtime. Static type checking with mypy adds an extra layer of verification, catching many potential issues before your code executes.</p>
<section id="understanding-type-hints" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="understanding-type-hints"><span class="header-section-number">4.4.1</span> Understanding Type Hints</h3>
<p>Python 3.5+ supports type hints, which are annotations indicating what types of values functions expect and return:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greeting(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These annotations don’t change how Python runs—they’re ignored by the interpreter at runtime. However, tools like mypy can analyze them statically to catch potential type errors.</p>
</section>
<section id="getting-started-with-mypy" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="getting-started-with-mypy"><span class="header-section-number">4.4.2</span> Getting Started with mypy</h3>
<p>First, install mypy in your development environment:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install mypy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s check a simple example:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example.py</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> double(x: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This is fine</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> double(<span class="dv">5</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This would fail at runtime</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>double(<span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run mypy to check:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> example.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<pre><code>example.py:8: error: Argument 1 to "double" has incompatible type "str"; expected "int"</code></pre>
<p>mypy caught the type mismatch without running the code!</p>
</section>
<section id="configuring-mypy" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="configuring-mypy"><span class="header-section-number">4.4.3</span> Configuring mypy</h3>
<p>Configure mypy in your <code>pyproject.toml</code> file for a consistent experience:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.mypy]</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_unused_configs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_incomplete_defs</span> <span class="op">=</span> <span class="cn">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Start with a lenient configuration and gradually increase strictness:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Starting configuration: permissive but helpful</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.mypy]</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="dt">check_untyped_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Intermediate configuration: more rigorous</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.mypy]</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_incomplete_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="dt">check_untyped_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Strict configuration: full typing required</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.mypy]</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="dt">python_version</span> <span class="op">=</span> <span class="st">"3.9"</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_untyped_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="dt">disallow_incomplete_defs</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="dt">no_implicit_optional</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_redundant_casts</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_unused_ignores</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_return_any</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="dt">warn_unreachable</span> <span class="op">=</span> <span class="cn">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="gradual-typing" class="level3" data-number="4.4.4">
<h3 data-number="4.4.4" class="anchored" data-anchor-id="gradual-typing"><span class="header-section-number">4.4.4</span> Gradual Typing</h3>
<p>One major advantage of Python’s type system is gradual typing—you can add types incrementally:</p>
<ol type="1">
<li>Start with critical or error-prone modules</li>
<li>Add types to public interfaces first</li>
<li>Increase type coverage over time</li>
</ol>
</section>
<section id="essential-type-annotations" class="level3" data-number="4.4.5">
<h3 data-number="4.4.5" class="anchored" data-anchor-id="essential-type-annotations"><span class="header-section-number">4.4.5</span> Essential Type Annotations</h3>
<section id="basic-types" class="level4" data-number="4.4.5.1">
<h4 data-number="4.4.5.1" class="anchored" data-anchor-id="basic-types"><span class="header-section-number">4.4.5.1</span> Basic Types</h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>name: <span class="bu">str</span> <span class="op">=</span> <span class="st">"Alice"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>age: <span class="bu">int</span> <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>height: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1.75</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>is_active: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Lists, sets, and dictionaries</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>names: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> [<span class="st">"Alice"</span>, <span class="st">"Bob"</span>]</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>unique_ids: <span class="bu">set</span>[<span class="bu">int</span>] <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>}</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>user_scores: <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">int</span>] <span class="op">=</span> {<span class="st">"Alice"</span>: <span class="dv">100</span>, <span class="st">"Bob"</span>: <span class="dv">85</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="function-annotations" class="level4" data-number="4.4.5.2">
<h4 data-number="4.4.5.2" class="anchored" data-anchor-id="function-annotations"><span class="header-section-number">4.4.5.2</span> Function Annotations</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_total(prices: <span class="bu">list</span>[<span class="bu">float</span>], tax_rate: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the total price including tax."""</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    subtotal <span class="op">=</span> <span class="bu">sum</span>(prices)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> subtotal <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> tax_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="class-annotations" class="level4" data-number="4.4.5.3">
<h4 data-number="4.4.5.3" class="anchored" data-anchor-id="class-annotations"><span class="header-section-number">4.4.5.3</span> Class Annotations</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User:</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name: <span class="bu">str</span>, email: <span class="bu">str</span>, age: Optional[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name: <span class="bu">str</span> <span class="op">=</span> name</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.email: <span class="bu">str</span> <span class="op">=</span> email</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.age: Optional[<span class="bu">int</span>] <span class="op">=</span> age</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> is_adult(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Check if user is an adult."""</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.age <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span> <span class="kw">and</span> <span class="va">self</span>.age <span class="op">&gt;=</span> <span class="dv">18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="advanced-type-hints" class="level3" data-number="4.4.6">
<h3 data-number="4.4.6" class="anchored" data-anchor-id="advanced-type-hints"><span class="header-section-number">4.4.6</span> Advanced Type Hints</h3>
<section id="union-types" class="level4" data-number="4.4.6.1">
<h4 data-number="4.4.6.1" class="anchored" data-anchor-id="union-types"><span class="header-section-number">4.4.6.1</span> Union Types</h4>
<p>Use Union to indicate multiple possible types (use the <code>|</code> operator in Python 3.10+):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Union</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Python 3.9 and earlier</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_input(data: Union[<span class="bu">str</span>, <span class="bu">list</span>[<span class="bu">str</span>]]) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(data, <span class="bu">list</span>):</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">", "</span>.join(data)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Python 3.10+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_input(data: <span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(data, <span class="bu">list</span>):</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">", "</span>.join(data)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="optional-and-none" class="level4" data-number="4.4.6.2">
<h4 data-number="4.4.6.2" class="anchored" data-anchor-id="optional-and-none"><span class="header-section-number">4.4.6.2</span> Optional and None</h4>
<p><code>Optional[T]</code> is equivalent to <code>Union[T, None]</code> or <code>T | None</code>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_user(user_id: <span class="bu">int</span>) <span class="op">-&gt;</span> Optional[<span class="bu">dict</span>]:</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Return user data or None if not found."""</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="type-aliases" class="level4" data-number="4.4.6.3">
<h4 data-number="4.4.6.3" class="anchored" data-anchor-id="type-aliases"><span class="header-section-number">4.4.6.3</span> Type Aliases</h4>
<p>Create aliases for complex types:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Dict, List, Tuple</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Complex type</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>TransactionRecord <span class="op">=</span> Tuple[<span class="bu">str</span>, <span class="bu">float</span>, <span class="bu">str</span>, Dict[<span class="bu">str</span>, <span class="bu">str</span>]]</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># More readable with alias</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_transactions(transactions: List[TransactionRecord]) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, amount, _, _ <span class="kw">in</span> transactions:</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        total <span class="op">+=</span> amount</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> total</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="callable" class="level4" data-number="4.4.6.4">
<h4 data-number="4.4.6.4" class="anchored" data-anchor-id="callable"><span class="header-section-number">4.4.6.4</span> Callable</h4>
<p>Type hint for functions:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Callable</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> apply_function(func: Callable[[<span class="bu">int</span>], <span class="bu">str</span>], value: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Apply a function that converts int to str."""</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> func(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="common-challenges-and-solutions" class="level3" data-number="4.4.7">
<h3 data-number="4.4.7" class="anchored" data-anchor-id="common-challenges-and-solutions"><span class="header-section-number">4.4.7</span> Common Challenges and Solutions</h3>
<section id="working-with-third-party-libraries" class="level4" data-number="4.4.7.1">
<h4 data-number="4.4.7.1" class="anchored" data-anchor-id="working-with-third-party-libraries"><span class="header-section-number">4.4.7.1</span> Working with Third-Party Libraries</h4>
<p>Not all libraries provide type hints. For popular packages, you can often find stub files:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install types-requests</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For others, you can silence mypy warnings selectively:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> untyped_library  <span class="co"># type: ignore</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="dealing-with-dynamic-features" class="level4" data-number="4.4.7.2">
<h4 data-number="4.4.7.2" class="anchored" data-anchor-id="dealing-with-dynamic-features"><span class="header-section-number">4.4.7.2</span> Dealing with Dynamic Features</h4>
<p>Python’s dynamic features can be challenging to type. Use <code>Any</code> when necessary:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Any, Dict</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse_config(config: Dict[<span class="bu">str</span>, Any]) <span class="op">-&gt;</span> Dict[<span class="bu">str</span>, Any]:</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Parse configuration with unknown structure."""</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="integration-with-your-workflow" class="level3" data-number="4.4.8">
<h3 data-number="4.4.8" class="anchored" data-anchor-id="integration-with-your-workflow"><span class="header-section-number">4.4.8</span> Integration with Your Workflow</h3>
<section id="running-mypy" class="level4" data-number="4.4.8.1">
<h4 data-number="4.4.8.1" class="anchored" data-anchor-id="running-mypy"><span class="header-section-number">4.4.8.1</span> Running mypy</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check a specific file</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> src/my_package/module.py</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the entire package</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> src/my_package/</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use multiple processes for faster checking</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> <span class="at">-p</span> my_package <span class="at">--python-version</span> 3.9 <span class="at">--multiprocessing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="integrating-with-cicd" class="level4" data-number="4.4.8.2">
<h4 data-number="4.4.8.2" class="anchored" data-anchor-id="integrating-with-cicd"><span class="header-section-number">4.4.8.2</span> Integrating with CI/CD</h4>
<p>Add mypy to your continuous integration workflow:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Type check with mypy</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> mypy src/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="editor-integration" class="level4" data-number="4.4.8.3">
<h4 data-number="4.4.8.3" class="anchored" data-anchor-id="editor-integration"><span class="header-section-number">4.4.8.3</span> Editor Integration</h4>
<p>Most Python-friendly editors support mypy:</p>
<ul>
<li>VS Code: Use the Pylance extension</li>
<li>PyCharm: Has built-in type checking</li>
<li>vim/neovim: Use ALE or similar plugins</li>
</ul>
</section>
</section>
<section id="benefits-of-type-checking" class="level3" data-number="4.4.9">
<h3 data-number="4.4.9" class="anchored" data-anchor-id="benefits-of-type-checking"><span class="header-section-number">4.4.9</span> Benefits of Type Checking</h3>
<ol type="1">
<li><strong>Catch errors early</strong>: Find type-related bugs before running code</li>
<li><strong>Improved IDE experience</strong>: Better code completion and refactoring</li>
<li><strong>Self-documenting code</strong>: Types serve as documentation</li>
<li><strong>Safer refactoring</strong>: Change code with more confidence</li>
<li><strong>Gradual adoption</strong>: Add types where they provide the most value</li>
</ol>
</section>
<section id="when-to-use-type-hints" class="level3" data-number="4.4.10">
<h3 data-number="4.4.10" class="anchored" data-anchor-id="when-to-use-type-hints"><span class="header-section-number">4.4.10</span> When to Use Type Hints</h3>
<p>Type hints are particularly valuable for:</p>
<ul>
<li>Functions with complex parameters or return values</li>
<li>Public APIs used by others</li>
<li>Areas with frequent bugs</li>
<li>Critical code paths</li>
<li>Large codebases with multiple contributors</li>
</ul>
<p>Type checking isn’t an all-or-nothing proposition. Even partial type coverage can significantly improve code quality and catch common errors. Start small, focus on interfaces, and expand your type coverage as your team becomes comfortable with the system.</p>
</section>
</section>
<section id="security-analysis-with-bandit" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="security-analysis-with-bandit"><span class="header-section-number">4.5</span> Security Analysis with Bandit</h2>
<p>Software security is a critical concern in modern development, yet it’s often overlooked until problems arise. Bandit is a tool designed to find common security issues in Python code through static analysis.</p>
<section id="understanding-security-static-analysis" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="understanding-security-static-analysis"><span class="header-section-number">4.5.1</span> Understanding Security Static Analysis</h3>
<p>Unlike functional testing or linting, security-focused static analysis looks specifically for patterns and practices that could lead to security vulnerabilities:</p>
<ul>
<li>Injection vulnerabilities</li>
<li>Use of insecure functions</li>
<li>Hardcoded credentials</li>
<li>Insecure cryptography</li>
<li>And many other security issues</li>
</ul>
</section>
<section id="getting-started-with-bandit" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="getting-started-with-bandit"><span class="header-section-number">4.5.2</span> Getting Started with Bandit</h3>
<p>First, install Bandit in your virtual environment:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install bandit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run a basic scan:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan a specific file</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/my_package/main.py</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan your entire codebase</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="security-issues-bandit-can-detect" class="level3" data-number="4.5.3">
<h3 data-number="4.5.3" class="anchored" data-anchor-id="security-issues-bandit-can-detect"><span class="header-section-number">4.5.3</span> Security Issues Bandit Can Detect</h3>
<p>Bandit identifies a wide range of security concerns, including:</p>
<section id="hardcoded-secrets" class="level4" data-number="4.5.3.1">
<h4 data-number="4.5.3.1" class="anchored" data-anchor-id="hardcoded-secrets"><span class="header-section-number">4.5.3.1</span> 1. Hardcoded Secrets</h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bandit will flag this</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> connect_to_database():</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="st">"super_secret_password"</span>  <span class="co"># Hardcoded secret</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Database(<span class="st">"user"</span>, password)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sql-injection" class="level4" data-number="4.5.3.2">
<h4 data-number="4.5.3.2" class="anchored" data-anchor-id="sql-injection"><span class="header-section-number">4.5.3.2</span> 2. SQL Injection</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vulnerable to SQL injection</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user(username):</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="ss">f"SELECT * FROM users WHERE username = '</span><span class="sc">{</span>username<span class="sc">}</span><span class="ss">'"</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> db.execute(query)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Safer approach</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user_safe(username):</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="st">"SELECT * FROM users WHERE username = </span><span class="sc">%s</span><span class="st">"</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> db.execute(query, (username,))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="shell-injection" class="level4" data-number="4.5.3.3">
<h4 data-number="4.5.3.3" class="anchored" data-anchor-id="shell-injection"><span class="header-section-number">4.5.3.3</span> 3. Shell Injection</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vulnerable to command injection</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_command(user_input):</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> os.system(<span class="ss">f"ls </span><span class="sc">{</span>user_input<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># User could inject commands</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Safer approach</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> subprocess</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_command_safe(user_input):</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> subprocess.run([<span class="st">"ls"</span>, user_input], capture_output<span class="op">=</span><span class="va">True</span>, text<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="insecure-cryptography" class="level4" data-number="4.5.3.4">
<h4 data-number="4.5.3.4" class="anchored" data-anchor-id="insecure-cryptography"><span class="header-section-number">4.5.3.4</span> 4. Insecure Cryptography</h4>
<div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using weak hash algorithms</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hash_password(password):</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hashlib.md5(password.encode()).hexdigest()  <span class="co"># MD5 is insecure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unsafe-deserialization" class="level4" data-number="4.5.3.5">
<h4 data-number="4.5.3.5" class="anchored" data-anchor-id="unsafe-deserialization"><span class="header-section-number">4.5.3.5</span> 5. Unsafe Deserialization</h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Insecure deserialization</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_user_preferences(data):</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pickle.loads(data)  <span class="co"># Pickle can execute arbitrary code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="configuring-bandit" class="level3" data-number="4.5.4">
<h3 data-number="4.5.4" class="anchored" data-anchor-id="configuring-bandit"><span class="header-section-number">4.5.4</span> Configuring Bandit</h3>
<p>You can configure Bandit using a <code>.bandit</code> file or your <code>pyproject.toml</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[tool.bandit]</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="dt">exclude_dirs</span> <span class="op">=</span> <span class="op">[</span><span class="st">"tests"</span><span class="op">,</span> <span class="st">"docs"</span><span class="op">]</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="dt">skips</span> <span class="op">=</span> <span class="op">[</span><span class="st">"B311"</span><span class="op">]</span>  <span class="co"># Skip random warning</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="dt">targets</span> <span class="op">=</span> <span class="op">[</span><span class="st">"src"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The most critical findings are categorized with high severity and confidence levels:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only report high-severity issues</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/ <span class="at">-iii</span> <span class="at">-ll</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="integrating-bandit-in-your-workflow" class="level3" data-number="4.5.5">
<h3 data-number="4.5.5" class="anchored" data-anchor-id="integrating-bandit-in-your-workflow"><span class="header-section-number">4.5.5</span> Integrating Bandit in Your Workflow</h3>
<section id="add-bandit-to-cicd" class="level4" data-number="4.5.5.1">
<h4 data-number="4.5.5.1" class="anchored" data-anchor-id="add-bandit-to-cicd"><span class="header-section-number">4.5.5.1</span> Add Bandit to CI/CD</h4>
<p>Add security scanning to your continuous integration pipeline:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Security check with Bandit</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> bandit -r src/ -f json -o bandit-results.json</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: convert results to GitHub Security format</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="co"># (requires additional tools or post-processing)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pre-commit-hook" class="level4" data-number="4.5.5.2">
<h4 data-number="4.5.5.2" class="anchored" data-anchor-id="pre-commit-hook"><span class="header-section-number">4.5.5.2</span> Pre-commit Hook</h4>
<p>Configure a pre-commit hook to run Bandit before commits:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In .pre-commit-config.yaml</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">repo</span><span class="kw">:</span><span class="at"> https://github.com/PyCQA/bandit</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rev</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.7.5</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> bandit</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"-r"</span><span class="kw">,</span><span class="at"> </span><span class="st">"src"</span><span class="kw">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="responding-to-security-findings" class="level3" data-number="4.5.6">
<h3 data-number="4.5.6" class="anchored" data-anchor-id="responding-to-security-findings"><span class="header-section-number">4.5.6</span> Responding to Security Findings</h3>
<p>When Bandit identifies security issues:</p>
<ol type="1">
<li><strong>Understand the risk</strong>: Read the detailed explanation to understand the potential vulnerability</li>
<li><strong>Fix high-severity issues immediately</strong>: These represent significant security risks</li>
<li><strong>Document deliberate exceptions</strong>: If a finding is a false positive, document why and use an inline ignore comment</li>
<li><strong>Review regularly</strong>: Security standards evolve, so regular scanning is essential</li>
</ol>
</section>
<section id="false-positives" class="level3" data-number="4.5.7">
<h3 data-number="4.5.7" class="anchored" data-anchor-id="false-positives"><span class="header-section-number">4.5.7</span> False Positives</h3>
<p>Like any static analysis tool, Bandit can produce false positives. You can exclude specific findings:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In code, to ignore a specific line</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle  <span class="co"># nosec</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For a whole file</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># nosec</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Or configure globally in pyproject.toml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>By incorporating security scanning with Bandit, you add an essential layer of protection against common security vulnerabilities, helping to ensure that your code is not just functional but also secure.</p>
</section>
</section>
<section id="finding-dead-code-with-vulture" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="finding-dead-code-with-vulture"><span class="header-section-number">4.6</span> Finding Dead Code with Vulture</h2>
<p>As projects evolve, code can become obsolete but remain in the codebase, creating maintenance burdens and confusion. Vulture is a static analysis tool that identifies unused code – functions, classes, and variables that are defined but never used.</p>
<section id="the-problem-of-dead-code" class="level3" data-number="4.6.1">
<h3 data-number="4.6.1" class="anchored" data-anchor-id="the-problem-of-dead-code"><span class="header-section-number">4.6.1</span> The Problem of Dead Code</h3>
<p>Dead code creates several issues:</p>
<ol type="1">
<li><strong>Maintenance overhead</strong>: Every line of code needs maintenance</li>
<li><strong>Cognitive load</strong>: Developers need to understand code that serves no purpose</li>
<li><strong>False security</strong>: Tests might pass while dead code goes unchecked</li>
<li><strong>Misleading documentation</strong>: Dead code can appear in documentation generators</li>
</ol>
</section>
<section id="getting-started-with-vulture" class="level3" data-number="4.6.2">
<h3 data-number="4.6.2" class="anchored" data-anchor-id="getting-started-with-vulture"><span class="header-section-number">4.6.2</span> Getting Started with Vulture</h3>
<p>Install Vulture in your virtual environment:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install vulture</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run a basic scan:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan a specific file</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/my_package/main.py</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan your entire codebase</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="what-vulture-detects" class="level3" data-number="4.6.3">
<h3 data-number="4.6.3" class="anchored" data-anchor-id="what-vulture-detects"><span class="header-section-number">4.6.3</span> What Vulture Detects</h3>
<p>Vulture identifies:</p>
<section id="unused-variables" class="level4" data-number="4.6.3.1">
<h4 data-number="4.6.3.1" class="anchored" data-anchor-id="unused-variables"><span class="header-section-number">4.6.3.1</span> 1. Unused Variables</h4>
<div class="sourceCode" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_data(data):</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []  <span class="co"># Defined but never used</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> item <span class="kw">in</span> data:</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>        processed <span class="op">=</span> transform(item)  <span class="co"># Unused variable</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>        data.append(item <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unused-functions" class="level4" data-number="4.6.3.2">
<h4 data-number="4.6.3.2" class="anchored" data-anchor-id="unused-functions"><span class="header-section-number">4.6.3.2</span> 2. Unused Functions</h4>
<div class="sourceCode" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_average(numbers):</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the average of a list of numbers."""</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> numbers:</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(numbers) <span class="op">/</span> <span class="bu">len</span>(numbers)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># If this function is never called anywhere, Vulture will flag it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unused-classes" class="level4" data-number="4.6.3.3">
<h4 data-number="4.6.3.3" class="anchored" data-anchor-id="unused-classes"><span class="header-section-number">4.6.3.3</span> 3. Unused Classes</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LegacyFormatter:</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Format data using the legacy method."""</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, data):</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.data <span class="op">=</span> data</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">format</span>(<span class="va">self</span>):</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> json.dumps(<span class="va">self</span>.data)</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co"># If this class is never instantiated, Vulture will flag it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unused-imports" class="level4" data-number="4.6.3.4">
<h4 data-number="4.6.3.4" class="anchored" data-anchor-id="unused-imports"><span class="header-section-number">4.6.3.4</span> 4. Unused Imports</h4>
<div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys  <span class="co"># If sys is imported but never used</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta  <span class="co"># If timedelta is never used</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="handling-false-positives" class="level3" data-number="4.6.4">
<h3 data-number="4.6.4" class="anchored" data-anchor-id="handling-false-positives"><span class="header-section-number">4.6.4</span> Handling False Positives</h3>
<p>Vulture can sometimes flag code that’s actually used but in ways it can’t detect. Common cases include:</p>
<ul>
<li>Classes used through reflection</li>
<li>Functions called in templates</li>
<li>Code used in an importable public API</li>
</ul>
<p>You can create a whitelist file to suppress these reports:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># whitelist.py</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co"># unused_function  # vulture:ignore</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run Vulture with the whitelist:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/ whitelist.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="configuration-and-integration" class="level3" data-number="4.6.5">
<h3 data-number="4.6.5" class="anchored" data-anchor-id="configuration-and-integration"><span class="header-section-number">4.6.5</span> Configuration and Integration</h3>
<p>Add Vulture to your workflow:</p>
<section id="command-line-options" class="level4" data-number="4.6.5.1">
<h4 data-number="4.6.5.1" class="anchored" data-anchor-id="command-line-options"><span class="header-section-number">4.6.5.1</span> Command Line Options</h4>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set minimum confidence (default is 60%)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> <span class="at">--min-confidence</span> 80 src/</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude test files</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/ <span class="at">--exclude</span> <span class="st">"test_*.py"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ci-integration" class="level4" data-number="4.6.5.2">
<h4 data-number="4.6.5.2" class="anchored" data-anchor-id="ci-integration"><span class="header-section-number">4.6.5.2</span> CI Integration</h4>
<div class="sourceCode" id="cb67"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Find dead code with Vulture</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> vulture src/ --min-confidence 80</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="best-practices-for-dead-code-removal" class="level3" data-number="4.6.6">
<h3 data-number="4.6.6" class="anchored" data-anchor-id="best-practices-for-dead-code-removal"><span class="header-section-number">4.6.6</span> Best Practices for Dead Code Removal</h3>
<ol type="1">
<li><strong>Verify before removing</strong>: Confirm the code is truly unused</li>
<li><strong>Use version control</strong>: Remove code through proper commits with explanations</li>
<li><strong>Update documentation</strong>: Ensure documentation reflects the changes</li>
<li><strong>Run tests</strong>: Confirm nothing breaks when the code is removed</li>
<li><strong>Look for patterns</strong>: Clusters of dead code often indicate larger architectural issues</li>
</ol>
</section>
<section id="when-to-run-vulture" class="level3" data-number="4.6.7">
<h3 data-number="4.6.7" class="anchored" data-anchor-id="when-to-run-vulture"><span class="header-section-number">4.6.7</span> When to Run Vulture</h3>
<ul>
<li>Before major refactoring</li>
<li>During codebase cleanup</li>
<li>As part of regular maintenance</li>
<li>When preparing for a significant release</li>
<li>When onboarding new team members (helps them focus on what matters)</li>
</ul>
<p>Regularly checking for and removing dead code keeps your codebase lean and maintainable. It also provides insights into how your application has evolved and may highlight areas where design improvements could be made.</p>
<p>With these additional security and code quality tools in place, your Python development workflow is now even more robust. Let’s move on to Part 3, where we’ll explore documentation and deployment options.</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/yourusername\.github\.io\/python-dev-book\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/01-foundation.html" class="pagination-link" aria-label="From Zero to Production: A Practical Python Development Pipeline">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/03-documentation.html" class="pagination-link" aria-label="From Zero to Production: A Practical Python Development Pipeline">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">From Zero to Production: A Practical Python Development Pipeline</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb68" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Part 2: Advancing Your Workflow</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Robust Dependency Management with pip-tools and uv</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>As your projects grow in complexity or involve more developers, the basic <span class="in">`pip freeze &gt; requirements.txt`</span> approach starts to show limitations. You need a dependency management system that gives you more control and ensures truly reproducible environments.</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Problem with `pip freeze`</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>While <span class="in">`pip freeze`</span> is convenient, it has several drawbacks:</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**No distinction between direct and indirect dependencies**: You can't easily tell which packages you explicitly need versus those that were installed as dependencies of other packages.</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Maintenance challenges**: When you want to update a package, you may need to regenerate the entire requirements file, potentially changing packages you didn't intend to update.</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**No environment synchronization**: Installing from a requirements.txt file adds packages but doesn't remove packages that are no longer needed.</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**No explicit dependency specification**: You can't easily specify version ranges (e.g., "I need any Django 4.x version") or extras.</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>Let's explore two powerful solutions: <span class="in">`pip-tools`</span> and <span class="in">`uv`</span>.</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a><span class="fu">### Solution 1: pip-tools</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>pip-tools introduces a two-file approach to dependency management:</span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span><span class="in">`requirements.in`</span>: A manually maintained list of your direct dependencies, potentially with version constraints.</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span><span class="in">`requirements.txt`</span>: A generated lock file containing exact versions of all dependencies (direct and indirect).</span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Getting Started with pip-tools</span></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Install pip-tools in your virtual environment</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pip-tools</span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a requirements.in file with your direct dependencies</span></span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a><span class="st">requests&gt;=2.25.0  # Use any version 2.25.0 or newer</span></span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a><span class="st">flask==2.0.1      # Use exactly this version</span></span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a><span class="st">pandas            # Use any version</span></span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-41"><a href="#cb68-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile the lock file</span></span>
<span id="cb68-42"><a href="#cb68-42" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> requirements.in</span>
<span id="cb68-43"><a href="#cb68-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-44"><a href="#cb68-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the exact dependencies</span></span>
<span id="cb68-45"><a href="#cb68-45" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span>
<span id="cb68-46"><a href="#cb68-46" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-47"><a href="#cb68-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-48"><a href="#cb68-48" aria-hidden="true" tabindex="-1"></a>The generated <span class="in">`requirements.txt`</span> will contain exact versions of your specified packages plus all their dependencies, including hashes for security.</span>
<span id="cb68-49"><a href="#cb68-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-50"><a href="#cb68-50" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Managing Development Dependencies</span></span>
<span id="cb68-51"><a href="#cb68-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-52"><a href="#cb68-52" aria-hidden="true" tabindex="-1"></a>For a cleaner setup, you can separate production and development dependencies:</span>
<span id="cb68-53"><a href="#cb68-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-54"><a href="#cb68-54" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-55"><a href="#cb68-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Create requirements-dev.in</span></span>
<span id="cb68-56"><a href="#cb68-56" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements-dev.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb68-57"><a href="#cb68-57" aria-hidden="true" tabindex="-1"></a><span class="st">-c requirements.txt  # Constraint: use same versions as in requirements.txt</span></span>
<span id="cb68-58"><a href="#cb68-58" aria-hidden="true" tabindex="-1"></a><span class="st">pytest&gt;=7.0.0</span></span>
<span id="cb68-59"><a href="#cb68-59" aria-hidden="true" tabindex="-1"></a><span class="st">pytest-cov</span></span>
<span id="cb68-60"><a href="#cb68-60" aria-hidden="true" tabindex="-1"></a><span class="st">ruff</span></span>
<span id="cb68-61"><a href="#cb68-61" aria-hidden="true" tabindex="-1"></a><span class="st">mypy</span></span>
<span id="cb68-62"><a href="#cb68-62" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb68-63"><a href="#cb68-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-64"><a href="#cb68-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile development dependencies</span></span>
<span id="cb68-65"><a href="#cb68-65" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> requirements-dev.in <span class="at">-o</span> requirements-dev.txt</span>
<span id="cb68-66"><a href="#cb68-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-67"><a href="#cb68-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all dependencies (both prod and dev)</span></span>
<span id="cb68-68"><a href="#cb68-68" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt requirements-dev.txt</span>
<span id="cb68-69"><a href="#cb68-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-70"><a href="#cb68-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-71"><a href="#cb68-71" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Updating Dependencies</span></span>
<span id="cb68-72"><a href="#cb68-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-73"><a href="#cb68-73" aria-hidden="true" tabindex="-1"></a>When you need to update packages:</span>
<span id="cb68-74"><a href="#cb68-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-75"><a href="#cb68-75" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-76"><a href="#cb68-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Update all packages to their latest allowed versions</span></span>
<span id="cb68-77"><a href="#cb68-77" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--upgrade</span> requirements.in</span>
<span id="cb68-78"><a href="#cb68-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-79"><a href="#cb68-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Update a specific package</span></span>
<span id="cb68-80"><a href="#cb68-80" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--upgrade-package</span> requests requirements.in</span>
<span id="cb68-81"><a href="#cb68-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-82"><a href="#cb68-82" aria-hidden="true" tabindex="-1"></a><span class="co"># After updating, sync your environment</span></span>
<span id="cb68-83"><a href="#cb68-83" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span>
<span id="cb68-84"><a href="#cb68-84" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-85"><a href="#cb68-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-86"><a href="#cb68-86" aria-hidden="true" tabindex="-1"></a><span class="fu">### Solution 2: uv</span></span>
<span id="cb68-87"><a href="#cb68-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-88"><a href="#cb68-88" aria-hidden="true" tabindex="-1"></a><span class="in">`uv`</span> is a newer, Rust-based tool that provides significant speed improvements while maintaining compatibility with existing Python packaging standards. It combines environment management, package installation, and dependency resolution in one tool.</span>
<span id="cb68-89"><a href="#cb68-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-90"><a href="#cb68-90" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Getting Started with uv</span></span>
<span id="cb68-91"><a href="#cb68-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-92"><a href="#cb68-92" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-93"><a href="#cb68-93" aria-hidden="true" tabindex="-1"></a><span class="co"># Install uv (globally with pipx or in your current environment)</span></span>
<span id="cb68-94"><a href="#cb68-94" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> install uv</span>
<span id="cb68-95"><a href="#cb68-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Or: pip install uv</span></span>
<span id="cb68-96"><a href="#cb68-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-97"><a href="#cb68-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a virtual environment (if needed)</span></span>
<span id="cb68-98"><a href="#cb68-98" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> venv</span>
<span id="cb68-99"><a href="#cb68-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-100"><a href="#cb68-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Activate the environment as usual</span></span>
<span id="cb68-101"><a href="#cb68-101" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> .venv/bin/activate  <span class="co"># On Windows: .venv\Scripts\activate</span></span>
<span id="cb68-102"><a href="#cb68-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-103"><a href="#cb68-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the same requirements.in file as above</span></span>
<span id="cb68-104"><a href="#cb68-104" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb68-105"><a href="#cb68-105" aria-hidden="true" tabindex="-1"></a><span class="st">requests&gt;=2.25.0</span></span>
<span id="cb68-106"><a href="#cb68-106" aria-hidden="true" tabindex="-1"></a><span class="st">flask==2.0.1</span></span>
<span id="cb68-107"><a href="#cb68-107" aria-hidden="true" tabindex="-1"></a><span class="st">pandas</span></span>
<span id="cb68-108"><a href="#cb68-108" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb68-109"><a href="#cb68-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-110"><a href="#cb68-110" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile the lock file</span></span>
<span id="cb68-111"><a href="#cb68-111" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile requirements.in <span class="at">-o</span> requirements.txt</span>
<span id="cb68-112"><a href="#cb68-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-113"><a href="#cb68-113" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb68-114"><a href="#cb68-114" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip sync requirements.txt</span>
<span id="cb68-115"><a href="#cb68-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-116"><a href="#cb68-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-117"><a href="#cb68-117" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Key Advantages of uv</span></span>
<span id="cb68-118"><a href="#cb68-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-119"><a href="#cb68-119" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Speed**: uv is significantly faster than standard pip and pip-tools, especially for large dependency trees.</span>
<span id="cb68-120"><a href="#cb68-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-121"><a href="#cb68-121" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Global caching**: uv implements efficient caching, reducing redundant downloads across projects.</span>
<span id="cb68-122"><a href="#cb68-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-123"><a href="#cb68-123" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Consolidated tooling**: Acts as a replacement for multiple tools (pip, pip-tools, virtualenv) with a consistent interface.</span>
<span id="cb68-124"><a href="#cb68-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-125"><a href="#cb68-125" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Enhanced dependency resolution**: Often provides clearer error messages for dependency conflicts.</span>
<span id="cb68-126"><a href="#cb68-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-127"><a href="#cb68-127" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Managing Dependencies with uv</span></span>
<span id="cb68-128"><a href="#cb68-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-129"><a href="#cb68-129" aria-hidden="true" tabindex="-1"></a>uv supports the same workflow as pip-tools but with different commands:</span>
<span id="cb68-130"><a href="#cb68-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-131"><a href="#cb68-131" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-132"><a href="#cb68-132" aria-hidden="true" tabindex="-1"></a><span class="co"># For development dependencies</span></span>
<span id="cb68-133"><a href="#cb68-133" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> requirements-dev.in <span class="op">&lt;&lt; EOF</span></span>
<span id="cb68-134"><a href="#cb68-134" aria-hidden="true" tabindex="-1"></a><span class="st">-c requirements.txt</span></span>
<span id="cb68-135"><a href="#cb68-135" aria-hidden="true" tabindex="-1"></a><span class="st">pytest&gt;=7.0.0</span></span>
<span id="cb68-136"><a href="#cb68-136" aria-hidden="true" tabindex="-1"></a><span class="st">pytest-cov</span></span>
<span id="cb68-137"><a href="#cb68-137" aria-hidden="true" tabindex="-1"></a><span class="st">ruff</span></span>
<span id="cb68-138"><a href="#cb68-138" aria-hidden="true" tabindex="-1"></a><span class="st">mypy</span></span>
<span id="cb68-139"><a href="#cb68-139" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb68-140"><a href="#cb68-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-141"><a href="#cb68-141" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile dev dependencies</span></span>
<span id="cb68-142"><a href="#cb68-142" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile requirements-dev.in <span class="at">-o</span> requirements-dev.txt</span>
<span id="cb68-143"><a href="#cb68-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-144"><a href="#cb68-144" aria-hidden="true" tabindex="-1"></a><span class="co"># Install all dependencies</span></span>
<span id="cb68-145"><a href="#cb68-145" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip sync requirements.txt requirements-dev.txt</span>
<span id="cb68-146"><a href="#cb68-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-147"><a href="#cb68-147" aria-hidden="true" tabindex="-1"></a><span class="co"># Update a specific package</span></span>
<span id="cb68-148"><a href="#cb68-148" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip compile <span class="at">--upgrade-package</span> requests requirements.in</span>
<span id="cb68-149"><a href="#cb68-149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-150"><a href="#cb68-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-151"><a href="#cb68-151" aria-hidden="true" tabindex="-1"></a><span class="fu">### Choosing Between pip-tools and uv</span></span>
<span id="cb68-152"><a href="#cb68-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-153"><a href="#cb68-153" aria-hidden="true" tabindex="-1"></a>Both tools solve the core problem of creating reproducible environments, but with different tradeoffs:</span>
<span id="cb68-154"><a href="#cb68-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-155"><a href="#cb68-155" aria-hidden="true" tabindex="-1"></a>| Factor | pip-tools | uv |</span>
<span id="cb68-156"><a href="#cb68-156" aria-hidden="true" tabindex="-1"></a>|--------|-----------|---|</span>
<span id="cb68-157"><a href="#cb68-157" aria-hidden="true" tabindex="-1"></a>| Speed | Good | Excellent (often 10x+ faster) |</span>
<span id="cb68-158"><a href="#cb68-158" aria-hidden="true" tabindex="-1"></a>| Installation | Simple Python package | External tool (but simple to install) |</span>
<span id="cb68-159"><a href="#cb68-159" aria-hidden="true" tabindex="-1"></a>| Maturity | Well-established | Newer but rapidly maturing |</span>
<span id="cb68-160"><a href="#cb68-160" aria-hidden="true" tabindex="-1"></a>| Functionality | Focused on dependency locking | Broader tool combining multiple functions |</span>
<span id="cb68-161"><a href="#cb68-161" aria-hidden="true" tabindex="-1"></a>| Learning curve | Minimal | Minimal (designed for compatibility) |</span>
<span id="cb68-162"><a href="#cb68-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-163"><a href="#cb68-163" aria-hidden="true" tabindex="-1"></a>For beginners or smaller projects, pip-tools offers a gentle introduction to proper dependency management with minimal new concepts. For larger projects or when speed becomes important, uv provides significant benefits with a similar workflow.</span>
<span id="cb68-164"><a href="#cb68-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-165"><a href="#cb68-165" aria-hidden="true" tabindex="-1"></a><span class="fu">### Best Practices for Either Approach</span></span>
<span id="cb68-166"><a href="#cb68-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-167"><a href="#cb68-167" aria-hidden="true" tabindex="-1"></a>Regardless of which tool you choose:</span>
<span id="cb68-168"><a href="#cb68-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-169"><a href="#cb68-169" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Commit both `.in` and `.txt` files** to version control. The <span class="in">`.in`</span> files represent your intent, while the <span class="in">`.txt`</span> files ensure reproducibility.</span>
<span id="cb68-170"><a href="#cb68-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-171"><a href="#cb68-171" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Use constraints carefully**. Start with loose constraints (just package names) and add version constraints only when needed.</span>
<span id="cb68-172"><a href="#cb68-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-173"><a href="#cb68-173" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Regularly update dependencies** to get security fixes, using <span class="in">`--upgrade`</span> or <span class="in">`--upgrade-package`</span>.</span>
<span id="cb68-174"><a href="#cb68-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-175"><a href="#cb68-175" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Always use `pip-sync` or `uv pip sync`** instead of <span class="in">`pip install -r requirements.txt`</span> to ensure your environment exactly matches the lock file.</span>
<span id="cb68-176"><a href="#cb68-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-177"><a href="#cb68-177" aria-hidden="true" tabindex="-1"></a>In the next section, we'll explore how to maintain code quality through automated formatting and linting with Ruff, taking your workflow to the next professional level.</span>
<span id="cb68-178"><a href="#cb68-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-179"><a href="#cb68-179" aria-hidden="true" tabindex="-1"></a><span class="fu">## Code Quality Tools with Ruff</span></span>
<span id="cb68-180"><a href="#cb68-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-181"><a href="#cb68-181" aria-hidden="true" tabindex="-1"></a>Writing code that works is only part of the development process. Code should also be readable, maintainable, and free from common errors. This is where code quality tools come in, helping you enforce consistent style and catch potential issues early.</span>
<span id="cb68-182"><a href="#cb68-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-183"><a href="#cb68-183" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Evolution of Python Code Quality Tools</span></span>
<span id="cb68-184"><a href="#cb68-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-185"><a href="#cb68-185" aria-hidden="true" tabindex="-1"></a>Traditionally, Python developers used multiple specialized tools:</span>
<span id="cb68-186"><a href="#cb68-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-187"><a href="#cb68-187" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Black** for code formatting</span>
<span id="cb68-188"><a href="#cb68-188" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**isort** for import sorting</span>
<span id="cb68-189"><a href="#cb68-189" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Flake8** for linting (style checks)</span>
<span id="cb68-190"><a href="#cb68-190" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Pylint** for deeper static analysis</span>
<span id="cb68-191"><a href="#cb68-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-192"><a href="#cb68-192" aria-hidden="true" tabindex="-1"></a>While effective, maintaining configuration for all these tools was cumbersome. Enter Ruff – a modern, Rust-based tool that combines formatting and linting in one incredibly fast package.</span>
<span id="cb68-193"><a href="#cb68-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-194"><a href="#cb68-194" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why Ruff?</span></span>
<span id="cb68-195"><a href="#cb68-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-196"><a href="#cb68-196" aria-hidden="true" tabindex="-1"></a>Ruff offers several compelling advantages:</span>
<span id="cb68-197"><a href="#cb68-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-198"><a href="#cb68-198" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Speed**: Often 10-100x faster than traditional Python linters</span>
<span id="cb68-199"><a href="#cb68-199" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Consolidation**: Replaces multiple tools with one consistent interface</span>
<span id="cb68-200"><a href="#cb68-200" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Compatibility**: Implements rules from established tools (Flake8, Black, isort, etc.)</span>
<span id="cb68-201"><a href="#cb68-201" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Configuration**: Single configuration in your pyproject.toml file</span>
<span id="cb68-202"><a href="#cb68-202" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Automatic fixing**: Can automatically fix many issues it identifies</span>
<span id="cb68-203"><a href="#cb68-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-204"><a href="#cb68-204" aria-hidden="true" tabindex="-1"></a><span class="fu">### Getting Started with Ruff</span></span>
<span id="cb68-205"><a href="#cb68-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-206"><a href="#cb68-206" aria-hidden="true" tabindex="-1"></a>First, install Ruff in your virtual environment:</span>
<span id="cb68-207"><a href="#cb68-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-208"><a href="#cb68-208" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-209"><a href="#cb68-209" aria-hidden="true" tabindex="-1"></a><span class="co"># If using pip</span></span>
<span id="cb68-210"><a href="#cb68-210" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install ruff</span>
<span id="cb68-211"><a href="#cb68-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-212"><a href="#cb68-212" aria-hidden="true" tabindex="-1"></a><span class="co"># If using uv</span></span>
<span id="cb68-213"><a href="#cb68-213" aria-hidden="true" tabindex="-1"></a><span class="ex">uv</span> pip install ruff</span>
<span id="cb68-214"><a href="#cb68-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-215"><a href="#cb68-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-216"><a href="#cb68-216" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic Configuration</span></span>
<span id="cb68-217"><a href="#cb68-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-218"><a href="#cb68-218" aria-hidden="true" tabindex="-1"></a>Configure Ruff in your <span class="in">`pyproject.toml`</span> file:</span>
<span id="cb68-219"><a href="#cb68-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-220"><a href="#cb68-220" aria-hidden="true" tabindex="-1"></a><span class="in">```toml</span></span>
<span id="cb68-221"><a href="#cb68-221" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff]</span></span>
<span id="cb68-222"><a href="#cb68-222" aria-hidden="true" tabindex="-1"></a><span class="in"># Enable pycodestyle, Pyflakes, isort, and more</span></span>
<span id="cb68-223"><a href="#cb68-223" aria-hidden="true" tabindex="-1"></a><span class="in">select = ["E", "F", "I"]</span></span>
<span id="cb68-224"><a href="#cb68-224" aria-hidden="true" tabindex="-1"></a><span class="in">ignore = []</span></span>
<span id="cb68-225"><a href="#cb68-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-226"><a href="#cb68-226" aria-hidden="true" tabindex="-1"></a><span class="in"># Allow lines to be as long as 100 characters</span></span>
<span id="cb68-227"><a href="#cb68-227" aria-hidden="true" tabindex="-1"></a><span class="in">line-length = 100</span></span>
<span id="cb68-228"><a href="#cb68-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-229"><a href="#cb68-229" aria-hidden="true" tabindex="-1"></a><span class="in"># Assume Python 3.10</span></span>
<span id="cb68-230"><a href="#cb68-230" aria-hidden="true" tabindex="-1"></a><span class="in">target-version = "py310"</span></span>
<span id="cb68-231"><a href="#cb68-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-232"><a href="#cb68-232" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff.format]</span></span>
<span id="cb68-233"><a href="#cb68-233" aria-hidden="true" tabindex="-1"></a><span class="in"># Formats code similar to Black (this is the default)</span></span>
<span id="cb68-234"><a href="#cb68-234" aria-hidden="true" tabindex="-1"></a><span class="in">quote-style = "double"</span></span>
<span id="cb68-235"><a href="#cb68-235" aria-hidden="true" tabindex="-1"></a><span class="in">indent-style = "space"</span></span>
<span id="cb68-236"><a href="#cb68-236" aria-hidden="true" tabindex="-1"></a><span class="in">line-ending = "auto"</span></span>
<span id="cb68-237"><a href="#cb68-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-238"><a href="#cb68-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-239"><a href="#cb68-239" aria-hidden="true" tabindex="-1"></a>This configuration enables:</span>
<span id="cb68-240"><a href="#cb68-240" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`E`</span> rules from pycodestyle (PEP 8 style guide)</span>
<span id="cb68-241"><a href="#cb68-241" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`F`</span> rules from Pyflakes (logical and syntax error detection)</span>
<span id="cb68-242"><a href="#cb68-242" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`I`</span> rules for import sorting (like isort)</span>
<span id="cb68-243"><a href="#cb68-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-244"><a href="#cb68-244" aria-hidden="true" tabindex="-1"></a><span class="fu">### Using Ruff in Your Workflow</span></span>
<span id="cb68-245"><a href="#cb68-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-246"><a href="#cb68-246" aria-hidden="true" tabindex="-1"></a>Ruff provides two main commands:</span>
<span id="cb68-247"><a href="#cb68-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-248"><a href="#cb68-248" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-249"><a href="#cb68-249" aria-hidden="true" tabindex="-1"></a><span class="co"># Check code for issues without changing it</span></span>
<span id="cb68-250"><a href="#cb68-250" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check .</span>
<span id="cb68-251"><a href="#cb68-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-252"><a href="#cb68-252" aria-hidden="true" tabindex="-1"></a><span class="co"># Format code (similar to Black)</span></span>
<span id="cb68-253"><a href="#cb68-253" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> format .</span>
<span id="cb68-254"><a href="#cb68-254" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-255"><a href="#cb68-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-256"><a href="#cb68-256" aria-hidden="true" tabindex="-1"></a>To automatically fix issues that Ruff can solve:</span>
<span id="cb68-257"><a href="#cb68-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-258"><a href="#cb68-258" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-259"><a href="#cb68-259" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix all auto-fixable issues</span></span>
<span id="cb68-260"><a href="#cb68-260" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check <span class="at">--fix</span> .</span>
<span id="cb68-261"><a href="#cb68-261" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-262"><a href="#cb68-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-263"><a href="#cb68-263" aria-hidden="true" tabindex="-1"></a><span class="fu">### Real-world Configuration Example</span></span>
<span id="cb68-264"><a href="#cb68-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-265"><a href="#cb68-265" aria-hidden="true" tabindex="-1"></a>Here's a more comprehensive configuration that balances strictness with practicality:</span>
<span id="cb68-266"><a href="#cb68-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-267"><a href="#cb68-267" aria-hidden="true" tabindex="-1"></a><span class="in">```toml</span></span>
<span id="cb68-268"><a href="#cb68-268" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff]</span></span>
<span id="cb68-269"><a href="#cb68-269" aria-hidden="true" tabindex="-1"></a><span class="in"># Target Python version</span></span>
<span id="cb68-270"><a href="#cb68-270" aria-hidden="true" tabindex="-1"></a><span class="in">target-version = "py39"</span></span>
<span id="cb68-271"><a href="#cb68-271" aria-hidden="true" tabindex="-1"></a><span class="in"># Line length</span></span>
<span id="cb68-272"><a href="#cb68-272" aria-hidden="true" tabindex="-1"></a><span class="in">line-length = 88</span></span>
<span id="cb68-273"><a href="#cb68-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-274"><a href="#cb68-274" aria-hidden="true" tabindex="-1"></a><span class="in"># Enable a comprehensive set of rules</span></span>
<span id="cb68-275"><a href="#cb68-275" aria-hidden="true" tabindex="-1"></a><span class="in">select = [</span></span>
<span id="cb68-276"><a href="#cb68-276" aria-hidden="true" tabindex="-1"></a><span class="in">    "E",   # pycodestyle errors</span></span>
<span id="cb68-277"><a href="#cb68-277" aria-hidden="true" tabindex="-1"></a><span class="in">    "F",   # pyflakes</span></span>
<span id="cb68-278"><a href="#cb68-278" aria-hidden="true" tabindex="-1"></a><span class="in">    "I",   # isort</span></span>
<span id="cb68-279"><a href="#cb68-279" aria-hidden="true" tabindex="-1"></a><span class="in">    "W",   # pycodestyle warnings</span></span>
<span id="cb68-280"><a href="#cb68-280" aria-hidden="true" tabindex="-1"></a><span class="in">    "C90", # mccabe complexity</span></span>
<span id="cb68-281"><a href="#cb68-281" aria-hidden="true" tabindex="-1"></a><span class="in">    "N",   # pep8-naming</span></span>
<span id="cb68-282"><a href="#cb68-282" aria-hidden="true" tabindex="-1"></a><span class="in">    "B",   # flake8-bugbear</span></span>
<span id="cb68-283"><a href="#cb68-283" aria-hidden="true" tabindex="-1"></a><span class="in">    "UP",  # pyupgrade</span></span>
<span id="cb68-284"><a href="#cb68-284" aria-hidden="true" tabindex="-1"></a><span class="in">    "D",   # pydocstyle</span></span>
<span id="cb68-285"><a href="#cb68-285" aria-hidden="true" tabindex="-1"></a><span class="in">]</span></span>
<span id="cb68-286"><a href="#cb68-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-287"><a href="#cb68-287" aria-hidden="true" tabindex="-1"></a><span class="in"># Ignore specific rules</span></span>
<span id="cb68-288"><a href="#cb68-288" aria-hidden="true" tabindex="-1"></a><span class="in">ignore = [</span></span>
<span id="cb68-289"><a href="#cb68-289" aria-hidden="true" tabindex="-1"></a><span class="in">    "E203",  # Whitespace before ':' (handled by formatter)</span></span>
<span id="cb68-290"><a href="#cb68-290" aria-hidden="true" tabindex="-1"></a><span class="in">    "D100",  # Missing docstring in public module</span></span>
<span id="cb68-291"><a href="#cb68-291" aria-hidden="true" tabindex="-1"></a><span class="in">    "D104",  # Missing docstring in public package</span></span>
<span id="cb68-292"><a href="#cb68-292" aria-hidden="true" tabindex="-1"></a><span class="in">]</span></span>
<span id="cb68-293"><a href="#cb68-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-294"><a href="#cb68-294" aria-hidden="true" tabindex="-1"></a><span class="in"># Exclude certain files/directories from checking</span></span>
<span id="cb68-295"><a href="#cb68-295" aria-hidden="true" tabindex="-1"></a><span class="in">exclude = [</span></span>
<span id="cb68-296"><a href="#cb68-296" aria-hidden="true" tabindex="-1"></a><span class="in">    ".git",</span></span>
<span id="cb68-297"><a href="#cb68-297" aria-hidden="true" tabindex="-1"></a><span class="in">    ".venv",</span></span>
<span id="cb68-298"><a href="#cb68-298" aria-hidden="true" tabindex="-1"></a><span class="in">    "__pycache__",</span></span>
<span id="cb68-299"><a href="#cb68-299" aria-hidden="true" tabindex="-1"></a><span class="in">    "build",</span></span>
<span id="cb68-300"><a href="#cb68-300" aria-hidden="true" tabindex="-1"></a><span class="in">    "dist",</span></span>
<span id="cb68-301"><a href="#cb68-301" aria-hidden="true" tabindex="-1"></a><span class="in">]</span></span>
<span id="cb68-302"><a href="#cb68-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-303"><a href="#cb68-303" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff.pydocstyle]</span></span>
<span id="cb68-304"><a href="#cb68-304" aria-hidden="true" tabindex="-1"></a><span class="in"># Use Google-style docstrings</span></span>
<span id="cb68-305"><a href="#cb68-305" aria-hidden="true" tabindex="-1"></a><span class="in">convention = "google"</span></span>
<span id="cb68-306"><a href="#cb68-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-307"><a href="#cb68-307" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff.mccabe]</span></span>
<span id="cb68-308"><a href="#cb68-308" aria-hidden="true" tabindex="-1"></a><span class="in"># Maximum McCabe complexity allowed</span></span>
<span id="cb68-309"><a href="#cb68-309" aria-hidden="true" tabindex="-1"></a><span class="in">max-complexity = 10</span></span>
<span id="cb68-310"><a href="#cb68-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-311"><a href="#cb68-311" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff.format]</span></span>
<span id="cb68-312"><a href="#cb68-312" aria-hidden="true" tabindex="-1"></a><span class="in"># Formatting options (black-compatible by default)</span></span>
<span id="cb68-313"><a href="#cb68-313" aria-hidden="true" tabindex="-1"></a><span class="in">quote-style = "double"</span></span>
<span id="cb68-314"><a href="#cb68-314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-315"><a href="#cb68-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-316"><a href="#cb68-316" aria-hidden="true" tabindex="-1"></a><span class="fu">### Integrating Ruff into Your Editor</span></span>
<span id="cb68-317"><a href="#cb68-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-318"><a href="#cb68-318" aria-hidden="true" tabindex="-1"></a>Ruff provides editor integrations for:</span>
<span id="cb68-319"><a href="#cb68-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-320"><a href="#cb68-320" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>VS Code (via the Ruff extension)</span>
<span id="cb68-321"><a href="#cb68-321" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>PyCharm (via third-party plugin)</span>
<span id="cb68-322"><a href="#cb68-322" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Vim/Neovim</span>
<span id="cb68-323"><a href="#cb68-323" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Emacs</span>
<span id="cb68-324"><a href="#cb68-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-325"><a href="#cb68-325" aria-hidden="true" tabindex="-1"></a>For example, in VS Code, install the Ruff extension and add to your settings.json:</span>
<span id="cb68-326"><a href="#cb68-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-327"><a href="#cb68-327" aria-hidden="true" tabindex="-1"></a><span class="in">```json</span></span>
<span id="cb68-328"><a href="#cb68-328" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb68-329"><a href="#cb68-329" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.formatOnSave"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb68-330"><a href="#cb68-330" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.codeActionsOnSave"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb68-331"><a href="#cb68-331" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"source.fixAll.ruff"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb68-332"><a href="#cb68-332" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"source.organizeImports.ruff"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb68-333"><a href="#cb68-333" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb68-334"><a href="#cb68-334" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span>
<span id="cb68-335"><a href="#cb68-335" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-336"><a href="#cb68-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-337"><a href="#cb68-337" aria-hidden="true" tabindex="-1"></a>This configuration automatically formats code and fixes issues whenever you save a file.</span>
<span id="cb68-338"><a href="#cb68-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-339"><a href="#cb68-339" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gradually Adopting Ruff</span></span>
<span id="cb68-340"><a href="#cb68-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-341"><a href="#cb68-341" aria-hidden="true" tabindex="-1"></a>If you're working with an existing codebase, you can adopt Ruff gradually:</span>
<span id="cb68-342"><a href="#cb68-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-343"><a href="#cb68-343" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Start with formatting only**: Begin with <span class="in">`ruff format`</span> to establish consistent formatting</span>
<span id="cb68-344"><a href="#cb68-344" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Add basic linting**: Enable a few rule sets like <span class="in">`E`</span>, <span class="in">`F`</span>, and <span class="in">`I`</span></span>
<span id="cb68-345"><a href="#cb68-345" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Gradually increase strictness**: Add more rule sets as your team adjusts</span>
<span id="cb68-346"><a href="#cb68-346" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Use per-file ignores**: For specific issues in specific files</span>
<span id="cb68-347"><a href="#cb68-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-348"><a href="#cb68-348" aria-hidden="true" tabindex="-1"></a><span class="in">```toml</span></span>
<span id="cb68-349"><a href="#cb68-349" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.ruff.per-file-ignores]</span></span>
<span id="cb68-350"><a href="#cb68-350" aria-hidden="true" tabindex="-1"></a><span class="in">"tests/*" = ["D103"]  # Ignore missing docstrings in tests</span></span>
<span id="cb68-351"><a href="#cb68-351" aria-hidden="true" tabindex="-1"></a><span class="in">"__init__.py" = ["F401"]  # Ignore unused imports in __init__.py</span></span>
<span id="cb68-352"><a href="#cb68-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-353"><a href="#cb68-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-354"><a href="#cb68-354" aria-hidden="true" tabindex="-1"></a><span class="fu">### Enforcing Code Quality in CI</span></span>
<span id="cb68-355"><a href="#cb68-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-356"><a href="#cb68-356" aria-hidden="true" tabindex="-1"></a>Add Ruff to your CI pipeline to ensure code quality standards are maintained:</span>
<span id="cb68-357"><a href="#cb68-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-358"><a href="#cb68-358" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb68-359"><a href="#cb68-359" aria-hidden="true" tabindex="-1"></a><span class="co"># In your GitHub Actions workflow (.github/workflows/ci.yml)</span></span>
<span id="cb68-360"><a href="#cb68-360" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check formatting with Ruff</span></span>
<span id="cb68-361"><a href="#cb68-361" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> ruff format --check .</span></span>
<span id="cb68-362"><a href="#cb68-362" aria-hidden="true" tabindex="-1"></a><span class="at">  </span></span>
<span id="cb68-363"><a href="#cb68-363" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Lint with Ruff</span></span>
<span id="cb68-364"><a href="#cb68-364" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> ruff check .</span></span>
<span id="cb68-365"><a href="#cb68-365" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-366"><a href="#cb68-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-367"><a href="#cb68-367" aria-hidden="true" tabindex="-1"></a>The <span class="in">`--check`</span> flag on <span class="in">`ruff format`</span> makes it exit with an error if files would be reformatted, instead of actually changing them.</span>
<span id="cb68-368"><a href="#cb68-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-369"><a href="#cb68-369" aria-hidden="true" tabindex="-1"></a><span class="fu">### Beyond Ruff: When to Consider Other Tools</span></span>
<span id="cb68-370"><a href="#cb68-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-371"><a href="#cb68-371" aria-hidden="true" tabindex="-1"></a>While Ruff covers a wide range of code quality checks, some specific needs might require additional tools:</span>
<span id="cb68-372"><a href="#cb68-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-373"><a href="#cb68-373" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**mypy** for static type checking (covered in a later section)</span>
<span id="cb68-374"><a href="#cb68-374" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**bandit** for security-focused checks</span>
<span id="cb68-375"><a href="#cb68-375" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**vulture** for finding dead code</span>
<span id="cb68-376"><a href="#cb68-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-377"><a href="#cb68-377" aria-hidden="true" tabindex="-1"></a>However, Ruff's rule set continues to expand, potentially reducing the need for these additional tools over time.</span>
<span id="cb68-378"><a href="#cb68-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-379"><a href="#cb68-379" aria-hidden="true" tabindex="-1"></a>By incorporating Ruff into your workflow, you'll catch many common errors before they reach production and maintain a consistent, readable codebase. In the next section, we'll explore how to ensure your code works as expected through automated testing with pytest.</span>
<span id="cb68-380"><a href="#cb68-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-381"><a href="#cb68-381" aria-hidden="true" tabindex="-1"></a><span class="fu">## Automated Testing with pytest</span></span>
<span id="cb68-382"><a href="#cb68-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-383"><a href="#cb68-383" aria-hidden="true" tabindex="-1"></a>Testing is a crucial aspect of software development that ensures your code works as intended and continues to work as you make changes. Python's testing ecosystem offers numerous frameworks, but pytest has emerged as the most popular and powerful choice for most projects.</span>
<span id="cb68-384"><a href="#cb68-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-385"><a href="#cb68-385" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why Testing Matters</span></span>
<span id="cb68-386"><a href="#cb68-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-387"><a href="#cb68-387" aria-hidden="true" tabindex="-1"></a>Automated tests provide several key benefits:</span>
<span id="cb68-388"><a href="#cb68-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-389"><a href="#cb68-389" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Verification**: Confirm that your code works as expected</span>
<span id="cb68-390"><a href="#cb68-390" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Regression prevention**: Catch when changes break existing functionality</span>
<span id="cb68-391"><a href="#cb68-391" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Documentation**: Tests demonstrate how code is meant to be used</span>
<span id="cb68-392"><a href="#cb68-392" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Refactoring confidence**: Change code structure while ensuring behavior remains correct</span>
<span id="cb68-393"><a href="#cb68-393" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Design feedback**: Difficult-to-test code often indicates design problems</span>
<span id="cb68-394"><a href="#cb68-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-395"><a href="#cb68-395" aria-hidden="true" tabindex="-1"></a><span class="fu">### Getting Started with pytest</span></span>
<span id="cb68-396"><a href="#cb68-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-397"><a href="#cb68-397" aria-hidden="true" tabindex="-1"></a>First, install pytest in your virtual environment:</span>
<span id="cb68-398"><a href="#cb68-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-399"><a href="#cb68-399" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-400"><a href="#cb68-400" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard installation</span></span>
<span id="cb68-401"><a href="#cb68-401" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pytest</span>
<span id="cb68-402"><a href="#cb68-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-403"><a href="#cb68-403" aria-hidden="true" tabindex="-1"></a><span class="co"># With coverage reporting</span></span>
<span id="cb68-404"><a href="#cb68-404" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pytest pytest-cov</span>
<span id="cb68-405"><a href="#cb68-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-406"><a href="#cb68-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-407"><a href="#cb68-407" aria-hidden="true" tabindex="-1"></a><span class="fu">### Writing Your First Test</span></span>
<span id="cb68-408"><a href="#cb68-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-409"><a href="#cb68-409" aria-hidden="true" tabindex="-1"></a>Let's assume you have a simple function in <span class="in">`src/my_package/calculations.py`</span>:</span>
<span id="cb68-410"><a href="#cb68-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-411"><a href="#cb68-411" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-412"><a href="#cb68-412" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb68-413"><a href="#cb68-413" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Add two numbers and return the result."""</span></span>
<span id="cb68-414"><a href="#cb68-414" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb68-415"><a href="#cb68-415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-416"><a href="#cb68-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-417"><a href="#cb68-417" aria-hidden="true" tabindex="-1"></a>Create a test file in <span class="in">`tests/test_calculations.py`</span>:</span>
<span id="cb68-418"><a href="#cb68-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-419"><a href="#cb68-419" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-420"><a href="#cb68-420" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.calculations <span class="im">import</span> add</span>
<span id="cb68-421"><a href="#cb68-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-422"><a href="#cb68-422" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_add():</span>
<span id="cb68-423"><a href="#cb68-423" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test basic addition</span></span>
<span id="cb68-424"><a href="#cb68-424" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="dv">1</span>, <span class="dv">2</span>) <span class="op">==</span> <span class="dv">3</span></span>
<span id="cb68-425"><a href="#cb68-425" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-426"><a href="#cb68-426" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test with negative numbers</span></span>
<span id="cb68-427"><a href="#cb68-427" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>) <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb68-428"><a href="#cb68-428" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>) <span class="op">==</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb68-429"><a href="#cb68-429" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-430"><a href="#cb68-430" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test with floating point</span></span>
<span id="cb68-431"><a href="#cb68-431" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(<span class="fl">1.5</span>, <span class="fl">2.5</span>) <span class="op">==</span> <span class="fl">4.0</span></span>
<span id="cb68-432"><a href="#cb68-432" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-433"><a href="#cb68-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-434"><a href="#cb68-434" aria-hidden="true" tabindex="-1"></a><span class="fu">### Running Tests</span></span>
<span id="cb68-435"><a href="#cb68-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-436"><a href="#cb68-436" aria-hidden="true" tabindex="-1"></a>Run all tests from your project root:</span>
<span id="cb68-437"><a href="#cb68-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-438"><a href="#cb68-438" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-439"><a href="#cb68-439" aria-hidden="true" tabindex="-1"></a><span class="co"># Run all tests</span></span>
<span id="cb68-440"><a href="#cb68-440" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span></span>
<span id="cb68-441"><a href="#cb68-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-442"><a href="#cb68-442" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with more detail</span></span>
<span id="cb68-443"><a href="#cb68-443" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">-v</span></span>
<span id="cb68-444"><a href="#cb68-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-445"><a href="#cb68-445" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a specific test file</span></span>
<span id="cb68-446"><a href="#cb68-446" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> tests/test_calculations.py</span>
<span id="cb68-447"><a href="#cb68-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-448"><a href="#cb68-448" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a specific test function</span></span>
<span id="cb68-449"><a href="#cb68-449" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> tests/test_calculations.py::test_add</span>
<span id="cb68-450"><a href="#cb68-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-451"><a href="#cb68-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-452"><a href="#cb68-452" aria-hidden="true" tabindex="-1"></a><span class="fu">### pytest Features That Make Testing Easier</span></span>
<span id="cb68-453"><a href="#cb68-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-454"><a href="#cb68-454" aria-hidden="true" tabindex="-1"></a>pytest has several features that make it superior to Python's built-in unittest framework:</span>
<span id="cb68-455"><a href="#cb68-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-456"><a href="#cb68-456" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 1. Simple Assertions</span></span>
<span id="cb68-457"><a href="#cb68-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-458"><a href="#cb68-458" aria-hidden="true" tabindex="-1"></a>Instead of methods like <span class="in">`assertEqual`</span> or <span class="in">`assertTrue`</span>, pytest lets you use Python's built-in <span class="in">`assert`</span> statement, making tests more readable.</span>
<span id="cb68-459"><a href="#cb68-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-460"><a href="#cb68-460" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-461"><a href="#cb68-461" aria-hidden="true" tabindex="-1"></a><span class="co"># With pytest</span></span>
<span id="cb68-462"><a href="#cb68-462" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> result <span class="op">==</span> expected</span>
<span id="cb68-463"><a href="#cb68-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-464"><a href="#cb68-464" aria-hidden="true" tabindex="-1"></a><span class="co"># Instead of unittest's</span></span>
<span id="cb68-465"><a href="#cb68-465" aria-hidden="true" tabindex="-1"></a><span class="va">self</span>.assertEqual(result, expected)</span>
<span id="cb68-466"><a href="#cb68-466" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-467"><a href="#cb68-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-468"><a href="#cb68-468" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 2. Fixtures</span></span>
<span id="cb68-469"><a href="#cb68-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-470"><a href="#cb68-470" aria-hidden="true" tabindex="-1"></a>Fixtures are a powerful way to set up preconditions for your tests:</span>
<span id="cb68-471"><a href="#cb68-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-472"><a href="#cb68-472" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-473"><a href="#cb68-473" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb68-474"><a href="#cb68-474" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.database <span class="im">import</span> Database</span>
<span id="cb68-475"><a href="#cb68-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-476"><a href="#cb68-476" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.fixture</span></span>
<span id="cb68-477"><a href="#cb68-477" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> db():</span>
<span id="cb68-478"><a href="#cb68-478" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Provide a clean database instance for tests."""</span></span>
<span id="cb68-479"><a href="#cb68-479" aria-hidden="true" tabindex="-1"></a>    db <span class="op">=</span> Database(<span class="st">":memory:"</span>)  <span class="co"># Use in-memory SQLite</span></span>
<span id="cb68-480"><a href="#cb68-480" aria-hidden="true" tabindex="-1"></a>    db.create_tables()</span>
<span id="cb68-481"><a href="#cb68-481" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> db</span>
<span id="cb68-482"><a href="#cb68-482" aria-hidden="true" tabindex="-1"></a>    db.close()  <span class="co"># Cleanup happens after the test</span></span>
<span id="cb68-483"><a href="#cb68-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-484"><a href="#cb68-484" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_save_record(db):</span>
<span id="cb68-485"><a href="#cb68-485" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The db fixture is automatically provided</span></span>
<span id="cb68-486"><a href="#cb68-486" aria-hidden="true" tabindex="-1"></a>    record <span class="op">=</span> {<span class="st">"id"</span>: <span class="dv">1</span>, <span class="st">"name"</span>: <span class="st">"Test"</span>}</span>
<span id="cb68-487"><a href="#cb68-487" aria-hidden="true" tabindex="-1"></a>    db.save(record)</span>
<span id="cb68-488"><a href="#cb68-488" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> db.get(<span class="dv">1</span>) <span class="op">==</span> record</span>
<span id="cb68-489"><a href="#cb68-489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-490"><a href="#cb68-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-491"><a href="#cb68-491" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3. Parameterized Tests</span></span>
<span id="cb68-492"><a href="#cb68-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-493"><a href="#cb68-493" aria-hidden="true" tabindex="-1"></a>Test multiple inputs without repetitive code:</span>
<span id="cb68-494"><a href="#cb68-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-495"><a href="#cb68-495" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-496"><a href="#cb68-496" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb68-497"><a href="#cb68-497" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.calculations <span class="im">import</span> add</span>
<span id="cb68-498"><a href="#cb68-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-499"><a href="#cb68-499" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.parametrize</span>(<span class="st">"a, b, expected"</span>, [</span>
<span id="cb68-500"><a href="#cb68-500" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb68-501"><a href="#cb68-501" aria-hidden="true" tabindex="-1"></a>    (<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb68-502"><a href="#cb68-502" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb68-503"><a href="#cb68-503" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">4.0</span>),</span>
<span id="cb68-504"><a href="#cb68-504" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb68-505"><a href="#cb68-505" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_add_parametrized(a, b, expected):</span>
<span id="cb68-506"><a href="#cb68-506" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> add(a, b) <span class="op">==</span> expected</span>
<span id="cb68-507"><a href="#cb68-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-508"><a href="#cb68-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-509"><a href="#cb68-509" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 4. Marks for Test Organization</span></span>
<span id="cb68-510"><a href="#cb68-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-511"><a href="#cb68-511" aria-hidden="true" tabindex="-1"></a>Organize tests with marks:</span>
<span id="cb68-512"><a href="#cb68-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-513"><a href="#cb68-513" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-514"><a href="#cb68-514" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.slow</span></span>
<span id="cb68-515"><a href="#cb68-515" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_complex_calculation():</span>
<span id="cb68-516"><a href="#cb68-516" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This test takes a long time</span></span>
<span id="cb68-517"><a href="#cb68-517" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb68-518"><a href="#cb68-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-519"><a href="#cb68-519" aria-hidden="true" tabindex="-1"></a><span class="co"># Run only tests marked as 'slow'</span></span>
<span id="cb68-520"><a href="#cb68-520" aria-hidden="true" tabindex="-1"></a><span class="co"># pytest -m slow</span></span>
<span id="cb68-521"><a href="#cb68-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-522"><a href="#cb68-522" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.skip</span>(reason<span class="op">=</span><span class="st">"Feature not implemented yet"</span>)</span>
<span id="cb68-523"><a href="#cb68-523" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_future_feature():</span>
<span id="cb68-524"><a href="#cb68-524" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb68-525"><a href="#cb68-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-526"><a href="#cb68-526" aria-hidden="true" tabindex="-1"></a><span class="at">@pytest.mark.xfail</span>(reason<span class="op">=</span><span class="st">"Known bug #123"</span>)</span>
<span id="cb68-527"><a href="#cb68-527" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_buggy_function():</span>
<span id="cb68-528"><a href="#cb68-528" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb68-529"><a href="#cb68-529" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-530"><a href="#cb68-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-531"><a href="#cb68-531" aria-hidden="true" tabindex="-1"></a><span class="fu">### Test Coverage</span></span>
<span id="cb68-532"><a href="#cb68-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-533"><a href="#cb68-533" aria-hidden="true" tabindex="-1"></a>Track which parts of your code are tested using pytest-cov:</span>
<span id="cb68-534"><a href="#cb68-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-535"><a href="#cb68-535" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-536"><a href="#cb68-536" aria-hidden="true" tabindex="-1"></a><span class="co"># Run tests with coverage report</span></span>
<span id="cb68-537"><a href="#cb68-537" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">--cov</span><span class="op">=</span>src/my_package</span>
<span id="cb68-538"><a href="#cb68-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-539"><a href="#cb68-539" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate HTML report for detailed analysis</span></span>
<span id="cb68-540"><a href="#cb68-540" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> <span class="at">--cov</span><span class="op">=</span>src/my_package <span class="at">--cov-report</span><span class="op">=</span>html</span>
<span id="cb68-541"><a href="#cb68-541" aria-hidden="true" tabindex="-1"></a><span class="co"># Then open htmlcov/index.html in your browser</span></span>
<span id="cb68-542"><a href="#cb68-542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-543"><a href="#cb68-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-544"><a href="#cb68-544" aria-hidden="true" tabindex="-1"></a>A coverage report helps identify untested code:</span>
<span id="cb68-545"><a href="#cb68-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-546"><a href="#cb68-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-547"><a href="#cb68-547" aria-hidden="true" tabindex="-1"></a><span class="in">----------- coverage: platform linux, python 3.9.5-final-0 -----------</span></span>
<span id="cb68-548"><a href="#cb68-548" aria-hidden="true" tabindex="-1"></a><span class="in">Name                             Stmts   Miss  Cover</span></span>
<span id="cb68-549"><a href="#cb68-549" aria-hidden="true" tabindex="-1"></a><span class="in">----------------------------------------------------</span></span>
<span id="cb68-550"><a href="#cb68-550" aria-hidden="true" tabindex="-1"></a><span class="in">src/my_package/__init__.py           1      0   100%</span></span>
<span id="cb68-551"><a href="#cb68-551" aria-hidden="true" tabindex="-1"></a><span class="in">src/my_package/calculations.py      10      2    80%</span></span>
<span id="cb68-552"><a href="#cb68-552" aria-hidden="true" tabindex="-1"></a><span class="in">src/my_package/models.py            45     15    67%</span></span>
<span id="cb68-553"><a href="#cb68-553" aria-hidden="true" tabindex="-1"></a><span class="in">----------------------------------------------------</span></span>
<span id="cb68-554"><a href="#cb68-554" aria-hidden="true" tabindex="-1"></a><span class="in">TOTAL                               56     17    70%</span></span>
<span id="cb68-555"><a href="#cb68-555" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-556"><a href="#cb68-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-557"><a href="#cb68-557" aria-hidden="true" tabindex="-1"></a><span class="fu">### Testing Best Practices</span></span>
<span id="cb68-558"><a href="#cb68-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-559"><a href="#cb68-559" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Write tests as you develop**: Don't wait until the end</span>
<span id="cb68-560"><a href="#cb68-560" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Name tests clearly**: Include the function name and scenario being tested</span>
<span id="cb68-561"><a href="#cb68-561" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**One assertion per test**: Focus each test on a single behavior</span>
<span id="cb68-562"><a href="#cb68-562" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Test edge cases**: Empty input, boundary values, error conditions</span>
<span id="cb68-563"><a href="#cb68-563" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Avoid test interdependence**: Tests should work independently</span>
<span id="cb68-564"><a href="#cb68-564" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Mock external dependencies**: APIs, databases, file systems</span>
<span id="cb68-565"><a href="#cb68-565" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span>**Keep tests fast**: Slow tests get run less often</span>
<span id="cb68-566"><a href="#cb68-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-567"><a href="#cb68-567" aria-hidden="true" tabindex="-1"></a><span class="fu">### Common Testing Patterns</span></span>
<span id="cb68-568"><a href="#cb68-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-569"><a href="#cb68-569" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Testing Exceptions</span></span>
<span id="cb68-570"><a href="#cb68-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-571"><a href="#cb68-571" aria-hidden="true" tabindex="-1"></a>Verify that your code raises the right exceptions:</span>
<span id="cb68-572"><a href="#cb68-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-573"><a href="#cb68-573" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-574"><a href="#cb68-574" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb68-575"><a href="#cb68-575" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> my_package.validate <span class="im">import</span> validate_username</span>
<span id="cb68-576"><a href="#cb68-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-577"><a href="#cb68-577" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_validate_username_too_short():</span>
<span id="cb68-578"><a href="#cb68-578" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pytest.raises(<span class="pp">ValueError</span>) <span class="im">as</span> excinfo:</span>
<span id="cb68-579"><a href="#cb68-579" aria-hidden="true" tabindex="-1"></a>        validate_username(<span class="st">"ab"</span>)  <span class="co"># Too short</span></span>
<span id="cb68-580"><a href="#cb68-580" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="st">"Username must be at least 3 characters"</span> <span class="kw">in</span> <span class="bu">str</span>(excinfo.value)</span>
<span id="cb68-581"><a href="#cb68-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-582"><a href="#cb68-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-583"><a href="#cb68-583" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Testing with Temporary Files</span></span>
<span id="cb68-584"><a href="#cb68-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-585"><a href="#cb68-585" aria-hidden="true" tabindex="-1"></a>Test file operations safely:</span>
<span id="cb68-586"><a href="#cb68-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-587"><a href="#cb68-587" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-588"><a href="#cb68-588" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_save_to_file(tmp_path):</span>
<span id="cb68-589"><a href="#cb68-589" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tmp_path is a built-in pytest fixture</span></span>
<span id="cb68-590"><a href="#cb68-590" aria-hidden="true" tabindex="-1"></a>    file_path <span class="op">=</span> tmp_path <span class="op">/</span> <span class="st">"test.txt"</span></span>
<span id="cb68-591"><a href="#cb68-591" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-592"><a href="#cb68-592" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test file writing</span></span>
<span id="cb68-593"><a href="#cb68-593" aria-hidden="true" tabindex="-1"></a>    save_to_file(file_path, <span class="st">"test content"</span>)</span>
<span id="cb68-594"><a href="#cb68-594" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-595"><a href="#cb68-595" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verify content</span></span>
<span id="cb68-596"><a href="#cb68-596" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> file_path.read_text() <span class="op">==</span> <span class="st">"test content"</span></span>
<span id="cb68-597"><a href="#cb68-597" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-598"><a href="#cb68-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-599"><a href="#cb68-599" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mocking</span></span>
<span id="cb68-600"><a href="#cb68-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-601"><a href="#cb68-601" aria-hidden="true" tabindex="-1"></a>Isolate your code from external dependencies using the pytest-mock plugin:</span>
<span id="cb68-602"><a href="#cb68-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-603"><a href="#cb68-603" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-604"><a href="#cb68-604" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fetch_user_data(mocker):</span>
<span id="cb68-605"><a href="#cb68-605" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mock the API call</span></span>
<span id="cb68-606"><a href="#cb68-606" aria-hidden="true" tabindex="-1"></a>    mock_response <span class="op">=</span> mocker.patch(<span class="st">'requests.get'</span>)</span>
<span id="cb68-607"><a href="#cb68-607" aria-hidden="true" tabindex="-1"></a>    mock_response.return_value.json.return_value <span class="op">=</span> {<span class="st">"id"</span>: <span class="dv">1</span>, <span class="st">"name"</span>: <span class="st">"Test User"</span>}</span>
<span id="cb68-608"><a href="#cb68-608" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-609"><a href="#cb68-609" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test our function</span></span>
<span id="cb68-610"><a href="#cb68-610" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> my_package.api <span class="im">import</span> get_user</span>
<span id="cb68-611"><a href="#cb68-611" aria-hidden="true" tabindex="-1"></a>    user <span class="op">=</span> get_user(<span class="dv">1</span>)</span>
<span id="cb68-612"><a href="#cb68-612" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-613"><a href="#cb68-613" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Verify results</span></span>
<span id="cb68-614"><a href="#cb68-614" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> user[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"Test User"</span></span>
<span id="cb68-615"><a href="#cb68-615" aria-hidden="true" tabindex="-1"></a>    mock_response.assert_called_once_with(<span class="st">'https://api.example.com/users/1'</span>)</span>
<span id="cb68-616"><a href="#cb68-616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-617"><a href="#cb68-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-618"><a href="#cb68-618" aria-hidden="true" tabindex="-1"></a><span class="fu">### Testing Strategy</span></span>
<span id="cb68-619"><a href="#cb68-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-620"><a href="#cb68-620" aria-hidden="true" tabindex="-1"></a>As your project grows, organize tests into different categories:</span>
<span id="cb68-621"><a href="#cb68-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-622"><a href="#cb68-622" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Unit tests**: Test individual functions/classes in isolation</span>
<span id="cb68-623"><a href="#cb68-623" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Integration tests**: Test interactions between components</span>
<span id="cb68-624"><a href="#cb68-624" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Functional tests**: Test entire features from a user perspective</span>
<span id="cb68-625"><a href="#cb68-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-626"><a href="#cb68-626" aria-hidden="true" tabindex="-1"></a>Most projects should have a pyramid shape: many unit tests, fewer integration tests, and even fewer functional tests.</span>
<span id="cb68-627"><a href="#cb68-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-628"><a href="#cb68-628" aria-hidden="true" tabindex="-1"></a><span class="fu">### Continuous Testing</span></span>
<span id="cb68-629"><a href="#cb68-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-630"><a href="#cb68-630" aria-hidden="true" tabindex="-1"></a>Make testing a habitual part of your workflow:</span>
<span id="cb68-631"><a href="#cb68-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-632"><a href="#cb68-632" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Run relevant tests as you code**: Many editors integrate with pytest</span>
<span id="cb68-633"><a href="#cb68-633" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Run full test suite before committing**: Use pre-commit hooks</span>
<span id="cb68-634"><a href="#cb68-634" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Run tests in CI**: Catch issues that might only appear in different environments</span>
<span id="cb68-635"><a href="#cb68-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-636"><a href="#cb68-636" aria-hidden="true" tabindex="-1"></a>By incorporating comprehensive testing into your development process, you'll catch bugs earlier, ship with more confidence, and build a more maintainable codebase.</span>
<span id="cb68-637"><a href="#cb68-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-638"><a href="#cb68-638" aria-hidden="true" tabindex="-1"></a>In the next section, we'll explore static type checking with mypy, which can help catch a whole new category of errors before your code even runs.</span>
<span id="cb68-639"><a href="#cb68-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-640"><a href="#cb68-640" aria-hidden="true" tabindex="-1"></a><span class="fu">## Type Checking with mypy</span></span>
<span id="cb68-641"><a href="#cb68-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-642"><a href="#cb68-642" aria-hidden="true" tabindex="-1"></a>Python is dynamically typed, which provides flexibility but can also lead to type-related errors that only appear at runtime. Static type checking with mypy adds an extra layer of verification, catching many potential issues before your code executes.</span>
<span id="cb68-643"><a href="#cb68-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-644"><a href="#cb68-644" aria-hidden="true" tabindex="-1"></a><span class="fu">### Understanding Type Hints</span></span>
<span id="cb68-645"><a href="#cb68-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-646"><a href="#cb68-646" aria-hidden="true" tabindex="-1"></a>Python 3.5+ supports type hints, which are annotations indicating what types of values functions expect and return:</span>
<span id="cb68-647"><a href="#cb68-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-648"><a href="#cb68-648" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-649"><a href="#cb68-649" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greeting(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb68-650"><a href="#cb68-650" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span></span>
<span id="cb68-651"><a href="#cb68-651" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-652"><a href="#cb68-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-653"><a href="#cb68-653" aria-hidden="true" tabindex="-1"></a>These annotations don't change how Python runs—they're ignored by the interpreter at runtime. However, tools like mypy can analyze them statically to catch potential type errors.</span>
<span id="cb68-654"><a href="#cb68-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-655"><a href="#cb68-655" aria-hidden="true" tabindex="-1"></a><span class="fu">### Getting Started with mypy</span></span>
<span id="cb68-656"><a href="#cb68-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-657"><a href="#cb68-657" aria-hidden="true" tabindex="-1"></a>First, install mypy in your development environment:</span>
<span id="cb68-658"><a href="#cb68-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-659"><a href="#cb68-659" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-660"><a href="#cb68-660" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install mypy</span>
<span id="cb68-661"><a href="#cb68-661" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-662"><a href="#cb68-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-663"><a href="#cb68-663" aria-hidden="true" tabindex="-1"></a>Let's check a simple example:</span>
<span id="cb68-664"><a href="#cb68-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-665"><a href="#cb68-665" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-666"><a href="#cb68-666" aria-hidden="true" tabindex="-1"></a><span class="co"># example.py</span></span>
<span id="cb68-667"><a href="#cb68-667" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> double(x: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb68-668"><a href="#cb68-668" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb68-669"><a href="#cb68-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-670"><a href="#cb68-670" aria-hidden="true" tabindex="-1"></a><span class="co"># This is fine</span></span>
<span id="cb68-671"><a href="#cb68-671" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> double(<span class="dv">5</span>)</span>
<span id="cb68-672"><a href="#cb68-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-673"><a href="#cb68-673" aria-hidden="true" tabindex="-1"></a><span class="co"># This would fail at runtime</span></span>
<span id="cb68-674"><a href="#cb68-674" aria-hidden="true" tabindex="-1"></a>double(<span class="st">"hello"</span>)</span>
<span id="cb68-675"><a href="#cb68-675" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-676"><a href="#cb68-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-677"><a href="#cb68-677" aria-hidden="true" tabindex="-1"></a>Run mypy to check:</span>
<span id="cb68-678"><a href="#cb68-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-679"><a href="#cb68-679" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-680"><a href="#cb68-680" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> example.py</span>
<span id="cb68-681"><a href="#cb68-681" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-682"><a href="#cb68-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-683"><a href="#cb68-683" aria-hidden="true" tabindex="-1"></a>Output:</span>
<span id="cb68-684"><a href="#cb68-684" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-685"><a href="#cb68-685" aria-hidden="true" tabindex="-1"></a><span class="in">example.py:8: error: Argument 1 to "double" has incompatible type "str"; expected "int"</span></span>
<span id="cb68-686"><a href="#cb68-686" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-687"><a href="#cb68-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-688"><a href="#cb68-688" aria-hidden="true" tabindex="-1"></a>mypy caught the type mismatch without running the code!</span>
<span id="cb68-689"><a href="#cb68-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-690"><a href="#cb68-690" aria-hidden="true" tabindex="-1"></a><span class="fu">### Configuring mypy</span></span>
<span id="cb68-691"><a href="#cb68-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-692"><a href="#cb68-692" aria-hidden="true" tabindex="-1"></a>Configure mypy in your <span class="in">`pyproject.toml`</span> file for a consistent experience:</span>
<span id="cb68-693"><a href="#cb68-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-694"><a href="#cb68-694" aria-hidden="true" tabindex="-1"></a><span class="in">```toml</span></span>
<span id="cb68-695"><a href="#cb68-695" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.mypy]</span></span>
<span id="cb68-696"><a href="#cb68-696" aria-hidden="true" tabindex="-1"></a><span class="in">python_version = "3.9"</span></span>
<span id="cb68-697"><a href="#cb68-697" aria-hidden="true" tabindex="-1"></a><span class="in">warn_return_any = true</span></span>
<span id="cb68-698"><a href="#cb68-698" aria-hidden="true" tabindex="-1"></a><span class="in">warn_unused_configs = true</span></span>
<span id="cb68-699"><a href="#cb68-699" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_untyped_defs = false</span></span>
<span id="cb68-700"><a href="#cb68-700" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_incomplete_defs = false</span></span>
<span id="cb68-701"><a href="#cb68-701" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-702"><a href="#cb68-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-703"><a href="#cb68-703" aria-hidden="true" tabindex="-1"></a>Start with a lenient configuration and gradually increase strictness:</span>
<span id="cb68-704"><a href="#cb68-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-705"><a href="#cb68-705" aria-hidden="true" tabindex="-1"></a><span class="in">```toml</span></span>
<span id="cb68-706"><a href="#cb68-706" aria-hidden="true" tabindex="-1"></a><span class="in"># Starting configuration: permissive but helpful</span></span>
<span id="cb68-707"><a href="#cb68-707" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.mypy]</span></span>
<span id="cb68-708"><a href="#cb68-708" aria-hidden="true" tabindex="-1"></a><span class="in">python_version = "3.9"</span></span>
<span id="cb68-709"><a href="#cb68-709" aria-hidden="true" tabindex="-1"></a><span class="in">warn_return_any = true</span></span>
<span id="cb68-710"><a href="#cb68-710" aria-hidden="true" tabindex="-1"></a><span class="in">check_untyped_defs = true</span></span>
<span id="cb68-711"><a href="#cb68-711" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_untyped_defs = false</span></span>
<span id="cb68-712"><a href="#cb68-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-713"><a href="#cb68-713" aria-hidden="true" tabindex="-1"></a><span class="in"># Intermediate configuration: more rigorous</span></span>
<span id="cb68-714"><a href="#cb68-714" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.mypy]</span></span>
<span id="cb68-715"><a href="#cb68-715" aria-hidden="true" tabindex="-1"></a><span class="in">python_version = "3.9"</span></span>
<span id="cb68-716"><a href="#cb68-716" aria-hidden="true" tabindex="-1"></a><span class="in">warn_return_any = true</span></span>
<span id="cb68-717"><a href="#cb68-717" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_incomplete_defs = true</span></span>
<span id="cb68-718"><a href="#cb68-718" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_untyped_defs = false</span></span>
<span id="cb68-719"><a href="#cb68-719" aria-hidden="true" tabindex="-1"></a><span class="in">check_untyped_defs = true</span></span>
<span id="cb68-720"><a href="#cb68-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-721"><a href="#cb68-721" aria-hidden="true" tabindex="-1"></a><span class="in"># Strict configuration: full typing required</span></span>
<span id="cb68-722"><a href="#cb68-722" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.mypy]</span></span>
<span id="cb68-723"><a href="#cb68-723" aria-hidden="true" tabindex="-1"></a><span class="in">python_version = "3.9"</span></span>
<span id="cb68-724"><a href="#cb68-724" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_untyped_defs = true</span></span>
<span id="cb68-725"><a href="#cb68-725" aria-hidden="true" tabindex="-1"></a><span class="in">disallow_incomplete_defs = true</span></span>
<span id="cb68-726"><a href="#cb68-726" aria-hidden="true" tabindex="-1"></a><span class="in">no_implicit_optional = true</span></span>
<span id="cb68-727"><a href="#cb68-727" aria-hidden="true" tabindex="-1"></a><span class="in">warn_redundant_casts = true</span></span>
<span id="cb68-728"><a href="#cb68-728" aria-hidden="true" tabindex="-1"></a><span class="in">warn_unused_ignores = true</span></span>
<span id="cb68-729"><a href="#cb68-729" aria-hidden="true" tabindex="-1"></a><span class="in">warn_return_any = true</span></span>
<span id="cb68-730"><a href="#cb68-730" aria-hidden="true" tabindex="-1"></a><span class="in">warn_unreachable = true</span></span>
<span id="cb68-731"><a href="#cb68-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-732"><a href="#cb68-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-733"><a href="#cb68-733" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gradual Typing</span></span>
<span id="cb68-734"><a href="#cb68-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-735"><a href="#cb68-735" aria-hidden="true" tabindex="-1"></a>One major advantage of Python's type system is gradual typing—you can add types incrementally:</span>
<span id="cb68-736"><a href="#cb68-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-737"><a href="#cb68-737" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Start with critical or error-prone modules</span>
<span id="cb68-738"><a href="#cb68-738" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Add types to public interfaces first</span>
<span id="cb68-739"><a href="#cb68-739" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Increase type coverage over time</span>
<span id="cb68-740"><a href="#cb68-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-741"><a href="#cb68-741" aria-hidden="true" tabindex="-1"></a><span class="fu">### Essential Type Annotations</span></span>
<span id="cb68-742"><a href="#cb68-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-743"><a href="#cb68-743" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Basic Types</span></span>
<span id="cb68-744"><a href="#cb68-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-745"><a href="#cb68-745" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-746"><a href="#cb68-746" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables</span></span>
<span id="cb68-747"><a href="#cb68-747" aria-hidden="true" tabindex="-1"></a>name: <span class="bu">str</span> <span class="op">=</span> <span class="st">"Alice"</span></span>
<span id="cb68-748"><a href="#cb68-748" aria-hidden="true" tabindex="-1"></a>age: <span class="bu">int</span> <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb68-749"><a href="#cb68-749" aria-hidden="true" tabindex="-1"></a>height: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1.75</span></span>
<span id="cb68-750"><a href="#cb68-750" aria-hidden="true" tabindex="-1"></a>is_active: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb68-751"><a href="#cb68-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-752"><a href="#cb68-752" aria-hidden="true" tabindex="-1"></a><span class="co"># Lists, sets, and dictionaries</span></span>
<span id="cb68-753"><a href="#cb68-753" aria-hidden="true" tabindex="-1"></a>names: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> [<span class="st">"Alice"</span>, <span class="st">"Bob"</span>]</span>
<span id="cb68-754"><a href="#cb68-754" aria-hidden="true" tabindex="-1"></a>unique_ids: <span class="bu">set</span>[<span class="bu">int</span>] <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>}</span>
<span id="cb68-755"><a href="#cb68-755" aria-hidden="true" tabindex="-1"></a>user_scores: <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">int</span>] <span class="op">=</span> {<span class="st">"Alice"</span>: <span class="dv">100</span>, <span class="st">"Bob"</span>: <span class="dv">85</span>}</span>
<span id="cb68-756"><a href="#cb68-756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-757"><a href="#cb68-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-758"><a href="#cb68-758" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Function Annotations</span></span>
<span id="cb68-759"><a href="#cb68-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-760"><a href="#cb68-760" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-761"><a href="#cb68-761" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_total(prices: <span class="bu">list</span>[<span class="bu">float</span>], tax_rate: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb68-762"><a href="#cb68-762" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the total price including tax."""</span></span>
<span id="cb68-763"><a href="#cb68-763" aria-hidden="true" tabindex="-1"></a>    subtotal <span class="op">=</span> <span class="bu">sum</span>(prices)</span>
<span id="cb68-764"><a href="#cb68-764" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> subtotal <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> tax_rate)</span>
<span id="cb68-765"><a href="#cb68-765" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-766"><a href="#cb68-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-767"><a href="#cb68-767" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Class Annotations</span></span>
<span id="cb68-768"><a href="#cb68-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-769"><a href="#cb68-769" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-770"><a href="#cb68-770" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb68-771"><a href="#cb68-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-772"><a href="#cb68-772" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User:</span>
<span id="cb68-773"><a href="#cb68-773" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name: <span class="bu">str</span>, email: <span class="bu">str</span>, age: Optional[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb68-774"><a href="#cb68-774" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name: <span class="bu">str</span> <span class="op">=</span> name</span>
<span id="cb68-775"><a href="#cb68-775" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.email: <span class="bu">str</span> <span class="op">=</span> email</span>
<span id="cb68-776"><a href="#cb68-776" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.age: Optional[<span class="bu">int</span>] <span class="op">=</span> age</span>
<span id="cb68-777"><a href="#cb68-777" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-778"><a href="#cb68-778" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> is_adult(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb68-779"><a href="#cb68-779" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Check if user is an adult."""</span></span>
<span id="cb68-780"><a href="#cb68-780" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.age <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span> <span class="kw">and</span> <span class="va">self</span>.age <span class="op">&gt;=</span> <span class="dv">18</span></span>
<span id="cb68-781"><a href="#cb68-781" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-782"><a href="#cb68-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-783"><a href="#cb68-783" aria-hidden="true" tabindex="-1"></a><span class="fu">### Advanced Type Hints</span></span>
<span id="cb68-784"><a href="#cb68-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-785"><a href="#cb68-785" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Union Types</span></span>
<span id="cb68-786"><a href="#cb68-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-787"><a href="#cb68-787" aria-hidden="true" tabindex="-1"></a>Use Union to indicate multiple possible types (use the <span class="in">`|`</span> operator in Python 3.10+):</span>
<span id="cb68-788"><a href="#cb68-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-789"><a href="#cb68-789" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-790"><a href="#cb68-790" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Union</span>
<span id="cb68-791"><a href="#cb68-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-792"><a href="#cb68-792" aria-hidden="true" tabindex="-1"></a><span class="co"># Python 3.9 and earlier</span></span>
<span id="cb68-793"><a href="#cb68-793" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_input(data: Union[<span class="bu">str</span>, <span class="bu">list</span>[<span class="bu">str</span>]]) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb68-794"><a href="#cb68-794" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(data, <span class="bu">list</span>):</span>
<span id="cb68-795"><a href="#cb68-795" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">", "</span>.join(data)</span>
<span id="cb68-796"><a href="#cb68-796" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span>
<span id="cb68-797"><a href="#cb68-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-798"><a href="#cb68-798" aria-hidden="true" tabindex="-1"></a><span class="co"># Python 3.10+</span></span>
<span id="cb68-799"><a href="#cb68-799" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_input(data: <span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb68-800"><a href="#cb68-800" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(data, <span class="bu">list</span>):</span>
<span id="cb68-801"><a href="#cb68-801" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">", "</span>.join(data)</span>
<span id="cb68-802"><a href="#cb68-802" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span>
<span id="cb68-803"><a href="#cb68-803" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-804"><a href="#cb68-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-805"><a href="#cb68-805" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Optional and None</span></span>
<span id="cb68-806"><a href="#cb68-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-807"><a href="#cb68-807" aria-hidden="true" tabindex="-1"></a><span class="in">`Optional[T]`</span> is equivalent to <span class="in">`Union[T, None]`</span> or <span class="in">`T | None`</span>:</span>
<span id="cb68-808"><a href="#cb68-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-809"><a href="#cb68-809" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-810"><a href="#cb68-810" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb68-811"><a href="#cb68-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-812"><a href="#cb68-812" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_user(user_id: <span class="bu">int</span>) <span class="op">-&gt;</span> Optional[<span class="bu">dict</span>]:</span>
<span id="cb68-813"><a href="#cb68-813" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Return user data or None if not found."""</span></span>
<span id="cb68-814"><a href="#cb68-814" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation...</span></span>
<span id="cb68-815"><a href="#cb68-815" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-816"><a href="#cb68-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-817"><a href="#cb68-817" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Type Aliases</span></span>
<span id="cb68-818"><a href="#cb68-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-819"><a href="#cb68-819" aria-hidden="true" tabindex="-1"></a>Create aliases for complex types:</span>
<span id="cb68-820"><a href="#cb68-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-821"><a href="#cb68-821" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-822"><a href="#cb68-822" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Dict, List, Tuple</span>
<span id="cb68-823"><a href="#cb68-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-824"><a href="#cb68-824" aria-hidden="true" tabindex="-1"></a><span class="co"># Complex type</span></span>
<span id="cb68-825"><a href="#cb68-825" aria-hidden="true" tabindex="-1"></a>TransactionRecord <span class="op">=</span> Tuple[<span class="bu">str</span>, <span class="bu">float</span>, <span class="bu">str</span>, Dict[<span class="bu">str</span>, <span class="bu">str</span>]]</span>
<span id="cb68-826"><a href="#cb68-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-827"><a href="#cb68-827" aria-hidden="true" tabindex="-1"></a><span class="co"># More readable with alias</span></span>
<span id="cb68-828"><a href="#cb68-828" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_transactions(transactions: List[TransactionRecord]) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb68-829"><a href="#cb68-829" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb68-830"><a href="#cb68-830" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, amount, _, _ <span class="kw">in</span> transactions:</span>
<span id="cb68-831"><a href="#cb68-831" aria-hidden="true" tabindex="-1"></a>        total <span class="op">+=</span> amount</span>
<span id="cb68-832"><a href="#cb68-832" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> total</span>
<span id="cb68-833"><a href="#cb68-833" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-834"><a href="#cb68-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-835"><a href="#cb68-835" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Callable</span></span>
<span id="cb68-836"><a href="#cb68-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-837"><a href="#cb68-837" aria-hidden="true" tabindex="-1"></a>Type hint for functions:</span>
<span id="cb68-838"><a href="#cb68-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-839"><a href="#cb68-839" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-840"><a href="#cb68-840" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Callable</span>
<span id="cb68-841"><a href="#cb68-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-842"><a href="#cb68-842" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> apply_function(func: Callable[[<span class="bu">int</span>], <span class="bu">str</span>], value: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb68-843"><a href="#cb68-843" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Apply a function that converts int to str."""</span></span>
<span id="cb68-844"><a href="#cb68-844" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> func(value)</span>
<span id="cb68-845"><a href="#cb68-845" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-846"><a href="#cb68-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-847"><a href="#cb68-847" aria-hidden="true" tabindex="-1"></a><span class="fu">### Common Challenges and Solutions</span></span>
<span id="cb68-848"><a href="#cb68-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-849"><a href="#cb68-849" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Working with Third-Party Libraries</span></span>
<span id="cb68-850"><a href="#cb68-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-851"><a href="#cb68-851" aria-hidden="true" tabindex="-1"></a>Not all libraries provide type hints. For popular packages, you can often find stub files:</span>
<span id="cb68-852"><a href="#cb68-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-853"><a href="#cb68-853" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-854"><a href="#cb68-854" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install types-requests</span>
<span id="cb68-855"><a href="#cb68-855" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-856"><a href="#cb68-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-857"><a href="#cb68-857" aria-hidden="true" tabindex="-1"></a>For others, you can silence mypy warnings selectively:</span>
<span id="cb68-858"><a href="#cb68-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-859"><a href="#cb68-859" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-860"><a href="#cb68-860" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> untyped_library  <span class="co"># type: ignore</span></span>
<span id="cb68-861"><a href="#cb68-861" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-862"><a href="#cb68-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-863"><a href="#cb68-863" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Dealing with Dynamic Features</span></span>
<span id="cb68-864"><a href="#cb68-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-865"><a href="#cb68-865" aria-hidden="true" tabindex="-1"></a>Python's dynamic features can be challenging to type. Use <span class="in">`Any`</span> when necessary:</span>
<span id="cb68-866"><a href="#cb68-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-867"><a href="#cb68-867" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-868"><a href="#cb68-868" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Any, Dict</span>
<span id="cb68-869"><a href="#cb68-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-870"><a href="#cb68-870" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse_config(config: Dict[<span class="bu">str</span>, Any]) <span class="op">-&gt;</span> Dict[<span class="bu">str</span>, Any]:</span>
<span id="cb68-871"><a href="#cb68-871" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Parse configuration with unknown structure."""</span></span>
<span id="cb68-872"><a href="#cb68-872" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation...</span></span>
<span id="cb68-873"><a href="#cb68-873" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-874"><a href="#cb68-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-875"><a href="#cb68-875" aria-hidden="true" tabindex="-1"></a><span class="fu">### Integration with Your Workflow</span></span>
<span id="cb68-876"><a href="#cb68-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-877"><a href="#cb68-877" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Running mypy</span></span>
<span id="cb68-878"><a href="#cb68-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-879"><a href="#cb68-879" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-880"><a href="#cb68-880" aria-hidden="true" tabindex="-1"></a><span class="co"># Check a specific file</span></span>
<span id="cb68-881"><a href="#cb68-881" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> src/my_package/module.py</span>
<span id="cb68-882"><a href="#cb68-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-883"><a href="#cb68-883" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the entire package</span></span>
<span id="cb68-884"><a href="#cb68-884" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> src/my_package/</span>
<span id="cb68-885"><a href="#cb68-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-886"><a href="#cb68-886" aria-hidden="true" tabindex="-1"></a><span class="co"># Use multiple processes for faster checking</span></span>
<span id="cb68-887"><a href="#cb68-887" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> <span class="at">-p</span> my_package <span class="at">--python-version</span> 3.9 <span class="at">--multiprocessing</span></span>
<span id="cb68-888"><a href="#cb68-888" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-889"><a href="#cb68-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-890"><a href="#cb68-890" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Integrating with CI/CD</span></span>
<span id="cb68-891"><a href="#cb68-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-892"><a href="#cb68-892" aria-hidden="true" tabindex="-1"></a>Add mypy to your continuous integration workflow:</span>
<span id="cb68-893"><a href="#cb68-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-894"><a href="#cb68-894" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb68-895"><a href="#cb68-895" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb68-896"><a href="#cb68-896" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Type check with mypy</span></span>
<span id="cb68-897"><a href="#cb68-897" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> mypy src/</span></span>
<span id="cb68-898"><a href="#cb68-898" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-899"><a href="#cb68-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-900"><a href="#cb68-900" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Editor Integration</span></span>
<span id="cb68-901"><a href="#cb68-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-902"><a href="#cb68-902" aria-hidden="true" tabindex="-1"></a>Most Python-friendly editors support mypy:</span>
<span id="cb68-903"><a href="#cb68-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-904"><a href="#cb68-904" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>VS Code: Use the Pylance extension</span>
<span id="cb68-905"><a href="#cb68-905" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>PyCharm: Has built-in type checking</span>
<span id="cb68-906"><a href="#cb68-906" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>vim/neovim: Use ALE or similar plugins</span>
<span id="cb68-907"><a href="#cb68-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-908"><a href="#cb68-908" aria-hidden="true" tabindex="-1"></a><span class="fu">### Benefits of Type Checking</span></span>
<span id="cb68-909"><a href="#cb68-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-910"><a href="#cb68-910" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Catch errors early**: Find type-related bugs before running code</span>
<span id="cb68-911"><a href="#cb68-911" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Improved IDE experience**: Better code completion and refactoring</span>
<span id="cb68-912"><a href="#cb68-912" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Self-documenting code**: Types serve as documentation</span>
<span id="cb68-913"><a href="#cb68-913" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Safer refactoring**: Change code with more confidence</span>
<span id="cb68-914"><a href="#cb68-914" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Gradual adoption**: Add types where they provide the most value</span>
<span id="cb68-915"><a href="#cb68-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-916"><a href="#cb68-916" aria-hidden="true" tabindex="-1"></a><span class="fu">### When to Use Type Hints</span></span>
<span id="cb68-917"><a href="#cb68-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-918"><a href="#cb68-918" aria-hidden="true" tabindex="-1"></a>Type hints are particularly valuable for:</span>
<span id="cb68-919"><a href="#cb68-919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-920"><a href="#cb68-920" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Functions with complex parameters or return values</span>
<span id="cb68-921"><a href="#cb68-921" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Public APIs used by others</span>
<span id="cb68-922"><a href="#cb68-922" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Areas with frequent bugs</span>
<span id="cb68-923"><a href="#cb68-923" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Critical code paths</span>
<span id="cb68-924"><a href="#cb68-924" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Large codebases with multiple contributors</span>
<span id="cb68-925"><a href="#cb68-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-926"><a href="#cb68-926" aria-hidden="true" tabindex="-1"></a>Type checking isn't an all-or-nothing proposition. Even partial type coverage can significantly improve code quality and catch common errors. Start small, focus on interfaces, and expand your type coverage as your team becomes comfortable with the system.</span>
<span id="cb68-927"><a href="#cb68-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-928"><a href="#cb68-928" aria-hidden="true" tabindex="-1"></a><span class="fu">## Security Analysis with Bandit</span></span>
<span id="cb68-929"><a href="#cb68-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-930"><a href="#cb68-930" aria-hidden="true" tabindex="-1"></a>Software security is a critical concern in modern development, yet it's often overlooked until problems arise. Bandit is a tool designed to find common security issues in Python code through static analysis.</span>
<span id="cb68-931"><a href="#cb68-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-932"><a href="#cb68-932" aria-hidden="true" tabindex="-1"></a><span class="fu">### Understanding Security Static Analysis</span></span>
<span id="cb68-933"><a href="#cb68-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-934"><a href="#cb68-934" aria-hidden="true" tabindex="-1"></a>Unlike functional testing or linting, security-focused static analysis looks specifically for patterns and practices that could lead to security vulnerabilities:</span>
<span id="cb68-935"><a href="#cb68-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-936"><a href="#cb68-936" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Injection vulnerabilities</span>
<span id="cb68-937"><a href="#cb68-937" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use of insecure functions</span>
<span id="cb68-938"><a href="#cb68-938" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Hardcoded credentials</span>
<span id="cb68-939"><a href="#cb68-939" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Insecure cryptography</span>
<span id="cb68-940"><a href="#cb68-940" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>And many other security issues</span>
<span id="cb68-941"><a href="#cb68-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-942"><a href="#cb68-942" aria-hidden="true" tabindex="-1"></a><span class="fu">### Getting Started with Bandit</span></span>
<span id="cb68-943"><a href="#cb68-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-944"><a href="#cb68-944" aria-hidden="true" tabindex="-1"></a>First, install Bandit in your virtual environment:</span>
<span id="cb68-945"><a href="#cb68-945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-946"><a href="#cb68-946" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-947"><a href="#cb68-947" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install bandit</span>
<span id="cb68-948"><a href="#cb68-948" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-949"><a href="#cb68-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-950"><a href="#cb68-950" aria-hidden="true" tabindex="-1"></a>Run a basic scan:</span>
<span id="cb68-951"><a href="#cb68-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-952"><a href="#cb68-952" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-953"><a href="#cb68-953" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan a specific file</span></span>
<span id="cb68-954"><a href="#cb68-954" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/my_package/main.py</span>
<span id="cb68-955"><a href="#cb68-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-956"><a href="#cb68-956" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan your entire codebase</span></span>
<span id="cb68-957"><a href="#cb68-957" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/</span>
<span id="cb68-958"><a href="#cb68-958" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-959"><a href="#cb68-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-960"><a href="#cb68-960" aria-hidden="true" tabindex="-1"></a><span class="fu">### Security Issues Bandit Can Detect</span></span>
<span id="cb68-961"><a href="#cb68-961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-962"><a href="#cb68-962" aria-hidden="true" tabindex="-1"></a>Bandit identifies a wide range of security concerns, including:</span>
<span id="cb68-963"><a href="#cb68-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-964"><a href="#cb68-964" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 1. Hardcoded Secrets</span></span>
<span id="cb68-965"><a href="#cb68-965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-966"><a href="#cb68-966" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-967"><a href="#cb68-967" aria-hidden="true" tabindex="-1"></a><span class="co"># Bandit will flag this</span></span>
<span id="cb68-968"><a href="#cb68-968" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> connect_to_database():</span>
<span id="cb68-969"><a href="#cb68-969" aria-hidden="true" tabindex="-1"></a>    password <span class="op">=</span> <span class="st">"super_secret_password"</span>  <span class="co"># Hardcoded secret</span></span>
<span id="cb68-970"><a href="#cb68-970" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Database(<span class="st">"user"</span>, password)</span>
<span id="cb68-971"><a href="#cb68-971" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-972"><a href="#cb68-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-973"><a href="#cb68-973" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 2. SQL Injection</span></span>
<span id="cb68-974"><a href="#cb68-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-975"><a href="#cb68-975" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-976"><a href="#cb68-976" aria-hidden="true" tabindex="-1"></a><span class="co"># Vulnerable to SQL injection</span></span>
<span id="cb68-977"><a href="#cb68-977" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user(username):</span>
<span id="cb68-978"><a href="#cb68-978" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="ss">f"SELECT * FROM users WHERE username = '</span><span class="sc">{</span>username<span class="sc">}</span><span class="ss">'"</span></span>
<span id="cb68-979"><a href="#cb68-979" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> db.execute(query)</span>
<span id="cb68-980"><a href="#cb68-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-981"><a href="#cb68-981" aria-hidden="true" tabindex="-1"></a><span class="co"># Safer approach</span></span>
<span id="cb68-982"><a href="#cb68-982" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user_safe(username):</span>
<span id="cb68-983"><a href="#cb68-983" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="st">"SELECT * FROM users WHERE username = </span><span class="sc">%s</span><span class="st">"</span></span>
<span id="cb68-984"><a href="#cb68-984" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> db.execute(query, (username,))</span>
<span id="cb68-985"><a href="#cb68-985" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-986"><a href="#cb68-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-987"><a href="#cb68-987" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3. Shell Injection</span></span>
<span id="cb68-988"><a href="#cb68-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-989"><a href="#cb68-989" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-990"><a href="#cb68-990" aria-hidden="true" tabindex="-1"></a><span class="co"># Vulnerable to command injection</span></span>
<span id="cb68-991"><a href="#cb68-991" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_command(user_input):</span>
<span id="cb68-992"><a href="#cb68-992" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> os.system(<span class="ss">f"ls </span><span class="sc">{</span>user_input<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># User could inject commands</span></span>
<span id="cb68-993"><a href="#cb68-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-994"><a href="#cb68-994" aria-hidden="true" tabindex="-1"></a><span class="co"># Safer approach</span></span>
<span id="cb68-995"><a href="#cb68-995" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> subprocess</span>
<span id="cb68-996"><a href="#cb68-996" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_command_safe(user_input):</span>
<span id="cb68-997"><a href="#cb68-997" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> subprocess.run([<span class="st">"ls"</span>, user_input], capture_output<span class="op">=</span><span class="va">True</span>, text<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb68-998"><a href="#cb68-998" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-999"><a href="#cb68-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1000"><a href="#cb68-1000" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 4. Insecure Cryptography</span></span>
<span id="cb68-1001"><a href="#cb68-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1002"><a href="#cb68-1002" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1003"><a href="#cb68-1003" aria-hidden="true" tabindex="-1"></a><span class="co"># Using weak hash algorithms</span></span>
<span id="cb68-1004"><a href="#cb68-1004" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb68-1005"><a href="#cb68-1005" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hash_password(password):</span>
<span id="cb68-1006"><a href="#cb68-1006" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hashlib.md5(password.encode()).hexdigest()  <span class="co"># MD5 is insecure</span></span>
<span id="cb68-1007"><a href="#cb68-1007" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1008"><a href="#cb68-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1009"><a href="#cb68-1009" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 5. Unsafe Deserialization</span></span>
<span id="cb68-1010"><a href="#cb68-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1011"><a href="#cb68-1011" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1012"><a href="#cb68-1012" aria-hidden="true" tabindex="-1"></a><span class="co"># Insecure deserialization</span></span>
<span id="cb68-1013"><a href="#cb68-1013" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb68-1014"><a href="#cb68-1014" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_user_preferences(data):</span>
<span id="cb68-1015"><a href="#cb68-1015" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pickle.loads(data)  <span class="co"># Pickle can execute arbitrary code</span></span>
<span id="cb68-1016"><a href="#cb68-1016" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1017"><a href="#cb68-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1018"><a href="#cb68-1018" aria-hidden="true" tabindex="-1"></a><span class="fu">### Configuring Bandit</span></span>
<span id="cb68-1019"><a href="#cb68-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1020"><a href="#cb68-1020" aria-hidden="true" tabindex="-1"></a>You can configure Bandit using a <span class="in">`.bandit`</span> file or your <span class="in">`pyproject.toml`</span>:</span>
<span id="cb68-1021"><a href="#cb68-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1022"><a href="#cb68-1022" aria-hidden="true" tabindex="-1"></a><span class="in">```toml</span></span>
<span id="cb68-1023"><a href="#cb68-1023" aria-hidden="true" tabindex="-1"></a><span class="in">[tool.bandit]</span></span>
<span id="cb68-1024"><a href="#cb68-1024" aria-hidden="true" tabindex="-1"></a><span class="in">exclude_dirs = ["tests", "docs"]</span></span>
<span id="cb68-1025"><a href="#cb68-1025" aria-hidden="true" tabindex="-1"></a><span class="in">skips = ["B311"]  # Skip random warning</span></span>
<span id="cb68-1026"><a href="#cb68-1026" aria-hidden="true" tabindex="-1"></a><span class="in">targets = ["src"]</span></span>
<span id="cb68-1027"><a href="#cb68-1027" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1028"><a href="#cb68-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1029"><a href="#cb68-1029" aria-hidden="true" tabindex="-1"></a>The most critical findings are categorized with high severity and confidence levels:</span>
<span id="cb68-1030"><a href="#cb68-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1031"><a href="#cb68-1031" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-1032"><a href="#cb68-1032" aria-hidden="true" tabindex="-1"></a><span class="co"># Only report high-severity issues</span></span>
<span id="cb68-1033"><a href="#cb68-1033" aria-hidden="true" tabindex="-1"></a><span class="ex">bandit</span> <span class="at">-r</span> src/ <span class="at">-iii</span> <span class="at">-ll</span></span>
<span id="cb68-1034"><a href="#cb68-1034" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1035"><a href="#cb68-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1036"><a href="#cb68-1036" aria-hidden="true" tabindex="-1"></a><span class="fu">### Integrating Bandit in Your Workflow</span></span>
<span id="cb68-1037"><a href="#cb68-1037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1038"><a href="#cb68-1038" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Add Bandit to CI/CD</span></span>
<span id="cb68-1039"><a href="#cb68-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1040"><a href="#cb68-1040" aria-hidden="true" tabindex="-1"></a>Add security scanning to your continuous integration pipeline:</span>
<span id="cb68-1041"><a href="#cb68-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1042"><a href="#cb68-1042" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb68-1043"><a href="#cb68-1043" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb68-1044"><a href="#cb68-1044" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Security check with Bandit</span></span>
<span id="cb68-1045"><a href="#cb68-1045" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> bandit -r src/ -f json -o bandit-results.json</span></span>
<span id="cb68-1046"><a href="#cb68-1046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1047"><a href="#cb68-1047" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: convert results to GitHub Security format</span></span>
<span id="cb68-1048"><a href="#cb68-1048" aria-hidden="true" tabindex="-1"></a><span class="co"># (requires additional tools or post-processing)</span></span>
<span id="cb68-1049"><a href="#cb68-1049" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1050"><a href="#cb68-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1051"><a href="#cb68-1051" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Pre-commit Hook</span></span>
<span id="cb68-1052"><a href="#cb68-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1053"><a href="#cb68-1053" aria-hidden="true" tabindex="-1"></a>Configure a pre-commit hook to run Bandit before commits:</span>
<span id="cb68-1054"><a href="#cb68-1054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1055"><a href="#cb68-1055" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb68-1056"><a href="#cb68-1056" aria-hidden="true" tabindex="-1"></a><span class="co"># In .pre-commit-config.yaml</span></span>
<span id="cb68-1057"><a href="#cb68-1057" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">repo</span><span class="kw">:</span><span class="at"> https://github.com/PyCQA/bandit</span></span>
<span id="cb68-1058"><a href="#cb68-1058" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rev</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.7.5</span></span>
<span id="cb68-1059"><a href="#cb68-1059" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb68-1060"><a href="#cb68-1060" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> bandit</span></span>
<span id="cb68-1061"><a href="#cb68-1061" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"-r"</span><span class="kw">,</span><span class="at"> </span><span class="st">"src"</span><span class="kw">]</span></span>
<span id="cb68-1062"><a href="#cb68-1062" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1063"><a href="#cb68-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1064"><a href="#cb68-1064" aria-hidden="true" tabindex="-1"></a><span class="fu">### Responding to Security Findings</span></span>
<span id="cb68-1065"><a href="#cb68-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1066"><a href="#cb68-1066" aria-hidden="true" tabindex="-1"></a>When Bandit identifies security issues:</span>
<span id="cb68-1067"><a href="#cb68-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1068"><a href="#cb68-1068" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Understand the risk**: Read the detailed explanation to understand the potential vulnerability</span>
<span id="cb68-1069"><a href="#cb68-1069" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Fix high-severity issues immediately**: These represent significant security risks</span>
<span id="cb68-1070"><a href="#cb68-1070" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Document deliberate exceptions**: If a finding is a false positive, document why and use an inline ignore comment</span>
<span id="cb68-1071"><a href="#cb68-1071" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Review regularly**: Security standards evolve, so regular scanning is essential</span>
<span id="cb68-1072"><a href="#cb68-1072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1073"><a href="#cb68-1073" aria-hidden="true" tabindex="-1"></a><span class="fu">### False Positives</span></span>
<span id="cb68-1074"><a href="#cb68-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1075"><a href="#cb68-1075" aria-hidden="true" tabindex="-1"></a>Like any static analysis tool, Bandit can produce false positives. You can exclude specific findings:</span>
<span id="cb68-1076"><a href="#cb68-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1077"><a href="#cb68-1077" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1078"><a href="#cb68-1078" aria-hidden="true" tabindex="-1"></a><span class="co"># In code, to ignore a specific line</span></span>
<span id="cb68-1079"><a href="#cb68-1079" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle  <span class="co"># nosec</span></span>
<span id="cb68-1080"><a href="#cb68-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1081"><a href="#cb68-1081" aria-hidden="true" tabindex="-1"></a><span class="co"># For a whole file</span></span>
<span id="cb68-1082"><a href="#cb68-1082" aria-hidden="true" tabindex="-1"></a><span class="co"># nosec</span></span>
<span id="cb68-1083"><a href="#cb68-1083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1084"><a href="#cb68-1084" aria-hidden="true" tabindex="-1"></a><span class="co"># Or configure globally in pyproject.toml</span></span>
<span id="cb68-1085"><a href="#cb68-1085" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1086"><a href="#cb68-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1087"><a href="#cb68-1087" aria-hidden="true" tabindex="-1"></a>By incorporating security scanning with Bandit, you add an essential layer of protection against common security vulnerabilities, helping to ensure that your code is not just functional but also secure.</span>
<span id="cb68-1088"><a href="#cb68-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1089"><a href="#cb68-1089" aria-hidden="true" tabindex="-1"></a><span class="fu">## Finding Dead Code with Vulture</span></span>
<span id="cb68-1090"><a href="#cb68-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1091"><a href="#cb68-1091" aria-hidden="true" tabindex="-1"></a>As projects evolve, code can become obsolete but remain in the codebase, creating maintenance burdens and confusion. Vulture is a static analysis tool that identifies unused code – functions, classes, and variables that are defined but never used.</span>
<span id="cb68-1092"><a href="#cb68-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1093"><a href="#cb68-1093" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Problem of Dead Code</span></span>
<span id="cb68-1094"><a href="#cb68-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1095"><a href="#cb68-1095" aria-hidden="true" tabindex="-1"></a>Dead code creates several issues:</span>
<span id="cb68-1096"><a href="#cb68-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1097"><a href="#cb68-1097" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Maintenance overhead**: Every line of code needs maintenance</span>
<span id="cb68-1098"><a href="#cb68-1098" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Cognitive load**: Developers need to understand code that serves no purpose</span>
<span id="cb68-1099"><a href="#cb68-1099" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**False security**: Tests might pass while dead code goes unchecked</span>
<span id="cb68-1100"><a href="#cb68-1100" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Misleading documentation**: Dead code can appear in documentation generators</span>
<span id="cb68-1101"><a href="#cb68-1101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1102"><a href="#cb68-1102" aria-hidden="true" tabindex="-1"></a><span class="fu">### Getting Started with Vulture</span></span>
<span id="cb68-1103"><a href="#cb68-1103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1104"><a href="#cb68-1104" aria-hidden="true" tabindex="-1"></a>Install Vulture in your virtual environment:</span>
<span id="cb68-1105"><a href="#cb68-1105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1106"><a href="#cb68-1106" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-1107"><a href="#cb68-1107" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install vulture</span>
<span id="cb68-1108"><a href="#cb68-1108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1109"><a href="#cb68-1109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1110"><a href="#cb68-1110" aria-hidden="true" tabindex="-1"></a>Run a basic scan:</span>
<span id="cb68-1111"><a href="#cb68-1111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1112"><a href="#cb68-1112" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-1113"><a href="#cb68-1113" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan a specific file</span></span>
<span id="cb68-1114"><a href="#cb68-1114" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/my_package/main.py</span>
<span id="cb68-1115"><a href="#cb68-1115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1116"><a href="#cb68-1116" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan your entire codebase</span></span>
<span id="cb68-1117"><a href="#cb68-1117" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/</span>
<span id="cb68-1118"><a href="#cb68-1118" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1119"><a href="#cb68-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1120"><a href="#cb68-1120" aria-hidden="true" tabindex="-1"></a><span class="fu">### What Vulture Detects</span></span>
<span id="cb68-1121"><a href="#cb68-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1122"><a href="#cb68-1122" aria-hidden="true" tabindex="-1"></a>Vulture identifies:</span>
<span id="cb68-1123"><a href="#cb68-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1124"><a href="#cb68-1124" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 1. Unused Variables</span></span>
<span id="cb68-1125"><a href="#cb68-1125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1126"><a href="#cb68-1126" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1127"><a href="#cb68-1127" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_data(data):</span>
<span id="cb68-1128"><a href="#cb68-1128" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []  <span class="co"># Defined but never used</span></span>
<span id="cb68-1129"><a href="#cb68-1129" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> item <span class="kw">in</span> data:</span>
<span id="cb68-1130"><a href="#cb68-1130" aria-hidden="true" tabindex="-1"></a>        processed <span class="op">=</span> transform(item)  <span class="co"># Unused variable</span></span>
<span id="cb68-1131"><a href="#cb68-1131" aria-hidden="true" tabindex="-1"></a>        data.append(item <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb68-1132"><a href="#cb68-1132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data</span>
<span id="cb68-1133"><a href="#cb68-1133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1134"><a href="#cb68-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1135"><a href="#cb68-1135" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 2. Unused Functions</span></span>
<span id="cb68-1136"><a href="#cb68-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1137"><a href="#cb68-1137" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1138"><a href="#cb68-1138" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_average(numbers):</span>
<span id="cb68-1139"><a href="#cb68-1139" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the average of a list of numbers."""</span></span>
<span id="cb68-1140"><a href="#cb68-1140" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> numbers:</span>
<span id="cb68-1141"><a href="#cb68-1141" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb68-1142"><a href="#cb68-1142" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(numbers) <span class="op">/</span> <span class="bu">len</span>(numbers)</span>
<span id="cb68-1143"><a href="#cb68-1143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1144"><a href="#cb68-1144" aria-hidden="true" tabindex="-1"></a><span class="co"># If this function is never called anywhere, Vulture will flag it</span></span>
<span id="cb68-1145"><a href="#cb68-1145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1146"><a href="#cb68-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1147"><a href="#cb68-1147" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3. Unused Classes</span></span>
<span id="cb68-1148"><a href="#cb68-1148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1149"><a href="#cb68-1149" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1150"><a href="#cb68-1150" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LegacyFormatter:</span>
<span id="cb68-1151"><a href="#cb68-1151" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Format data using the legacy method."""</span></span>
<span id="cb68-1152"><a href="#cb68-1152" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, data):</span>
<span id="cb68-1153"><a href="#cb68-1153" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.data <span class="op">=</span> data</span>
<span id="cb68-1154"><a href="#cb68-1154" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb68-1155"><a href="#cb68-1155" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">format</span>(<span class="va">self</span>):</span>
<span id="cb68-1156"><a href="#cb68-1156" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> json.dumps(<span class="va">self</span>.data)</span>
<span id="cb68-1157"><a href="#cb68-1157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1158"><a href="#cb68-1158" aria-hidden="true" tabindex="-1"></a><span class="co"># If this class is never instantiated, Vulture will flag it</span></span>
<span id="cb68-1159"><a href="#cb68-1159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1160"><a href="#cb68-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1161"><a href="#cb68-1161" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 4. Unused Imports</span></span>
<span id="cb68-1162"><a href="#cb68-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1163"><a href="#cb68-1163" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1164"><a href="#cb68-1164" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb68-1165"><a href="#cb68-1165" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys  <span class="co"># If sys is imported but never used</span></span>
<span id="cb68-1166"><a href="#cb68-1166" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb68-1167"><a href="#cb68-1167" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta  <span class="co"># If timedelta is never used</span></span>
<span id="cb68-1168"><a href="#cb68-1168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1169"><a href="#cb68-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1170"><a href="#cb68-1170" aria-hidden="true" tabindex="-1"></a><span class="fu">### Handling False Positives</span></span>
<span id="cb68-1171"><a href="#cb68-1171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1172"><a href="#cb68-1172" aria-hidden="true" tabindex="-1"></a>Vulture can sometimes flag code that's actually used but in ways it can't detect. Common cases include:</span>
<span id="cb68-1173"><a href="#cb68-1173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1174"><a href="#cb68-1174" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Classes used through reflection</span>
<span id="cb68-1175"><a href="#cb68-1175" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Functions called in templates</span>
<span id="cb68-1176"><a href="#cb68-1176" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Code used in an importable public API</span>
<span id="cb68-1177"><a href="#cb68-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1178"><a href="#cb68-1178" aria-hidden="true" tabindex="-1"></a>You can create a whitelist file to suppress these reports:</span>
<span id="cb68-1179"><a href="#cb68-1179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1180"><a href="#cb68-1180" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb68-1181"><a href="#cb68-1181" aria-hidden="true" tabindex="-1"></a><span class="co"># whitelist.py</span></span>
<span id="cb68-1182"><a href="#cb68-1182" aria-hidden="true" tabindex="-1"></a><span class="co"># unused_function  # vulture:ignore</span></span>
<span id="cb68-1183"><a href="#cb68-1183" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1184"><a href="#cb68-1184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1185"><a href="#cb68-1185" aria-hidden="true" tabindex="-1"></a>Run Vulture with the whitelist:</span>
<span id="cb68-1186"><a href="#cb68-1186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1187"><a href="#cb68-1187" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-1188"><a href="#cb68-1188" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/ whitelist.py</span>
<span id="cb68-1189"><a href="#cb68-1189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1190"><a href="#cb68-1190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1191"><a href="#cb68-1191" aria-hidden="true" tabindex="-1"></a><span class="fu">### Configuration and Integration</span></span>
<span id="cb68-1192"><a href="#cb68-1192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1193"><a href="#cb68-1193" aria-hidden="true" tabindex="-1"></a>Add Vulture to your workflow:</span>
<span id="cb68-1194"><a href="#cb68-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1195"><a href="#cb68-1195" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Command Line Options</span></span>
<span id="cb68-1196"><a href="#cb68-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1197"><a href="#cb68-1197" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb68-1198"><a href="#cb68-1198" aria-hidden="true" tabindex="-1"></a><span class="co"># Set minimum confidence (default is 60%)</span></span>
<span id="cb68-1199"><a href="#cb68-1199" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> <span class="at">--min-confidence</span> 80 src/</span>
<span id="cb68-1200"><a href="#cb68-1200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1201"><a href="#cb68-1201" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude test files</span></span>
<span id="cb68-1202"><a href="#cb68-1202" aria-hidden="true" tabindex="-1"></a><span class="ex">vulture</span> src/ <span class="at">--exclude</span> <span class="st">"test_*.py"</span></span>
<span id="cb68-1203"><a href="#cb68-1203" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1204"><a href="#cb68-1204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1205"><a href="#cb68-1205" aria-hidden="true" tabindex="-1"></a><span class="fu">#### CI Integration</span></span>
<span id="cb68-1206"><a href="#cb68-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1207"><a href="#cb68-1207" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb68-1208"><a href="#cb68-1208" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Actions example</span></span>
<span id="cb68-1209"><a href="#cb68-1209" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Find dead code with Vulture</span></span>
<span id="cb68-1210"><a href="#cb68-1210" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> vulture src/ --min-confidence 80</span></span>
<span id="cb68-1211"><a href="#cb68-1211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-1212"><a href="#cb68-1212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1213"><a href="#cb68-1213" aria-hidden="true" tabindex="-1"></a><span class="fu">### Best Practices for Dead Code Removal</span></span>
<span id="cb68-1214"><a href="#cb68-1214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1215"><a href="#cb68-1215" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Verify before removing**: Confirm the code is truly unused</span>
<span id="cb68-1216"><a href="#cb68-1216" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Use version control**: Remove code through proper commits with explanations</span>
<span id="cb68-1217"><a href="#cb68-1217" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Update documentation**: Ensure documentation reflects the changes</span>
<span id="cb68-1218"><a href="#cb68-1218" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Run tests**: Confirm nothing breaks when the code is removed</span>
<span id="cb68-1219"><a href="#cb68-1219" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Look for patterns**: Clusters of dead code often indicate larger architectural issues</span>
<span id="cb68-1220"><a href="#cb68-1220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1221"><a href="#cb68-1221" aria-hidden="true" tabindex="-1"></a><span class="fu">### When to Run Vulture</span></span>
<span id="cb68-1222"><a href="#cb68-1222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1223"><a href="#cb68-1223" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Before major refactoring</span>
<span id="cb68-1224"><a href="#cb68-1224" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>During codebase cleanup</span>
<span id="cb68-1225"><a href="#cb68-1225" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>As part of regular maintenance</span>
<span id="cb68-1226"><a href="#cb68-1226" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>When preparing for a significant release</span>
<span id="cb68-1227"><a href="#cb68-1227" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>When onboarding new team members (helps them focus on what matters)</span>
<span id="cb68-1228"><a href="#cb68-1228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1229"><a href="#cb68-1229" aria-hidden="true" tabindex="-1"></a>Regularly checking for and removing dead code keeps your codebase lean and maintainable. It also provides insights into how your application has evolved and may highlight areas where design improvements could be made.</span>
<span id="cb68-1230"><a href="#cb68-1230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-1231"><a href="#cb68-1231" aria-hidden="true" tabindex="-1"></a>With these additional security and code quality tools in place, your Python development workflow is now even more robust. Let's move on to Part 3, where we'll explore documentation and deployment options.</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/yourusername/python-dev-book/edit/main/chapters/02-workflow.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/yourusername/python-dev-book/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>